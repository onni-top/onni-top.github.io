<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.52" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta name="keywords" content="bajins,vue,vuepress,vuepress-theme,theme,ä¸»é¢˜,vuepressä¸»é¢˜,blog
,vuepress-blog,java,python,shell,sql,golang,script,shell script,nginx,windows,å»å¹¿å‘Š,androd,google drive
,one drive,idea,eclipse,git,å°ç¨‹åº"><meta name="referrer" content="never"><title>Nginx | onni</title><meta name="description" content="nav-onni-vuepress-hope">
    <link rel="preload" href="/assets/style-CjSe5PnQ.css" as="style"><link rel="stylesheet" href="/assets/style-CjSe5PnQ.css">
    <link rel="modulepreload" href="/assets/app-CPE2FVww.js"><link rel="modulepreload" href="/assets/Nginx.html-G4n3pHR6.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-CMjkTkwW.js" as="script"><link rel="prefetch" href="/assets/portfolio.html-Xy02XaPD.js" as="script"><link rel="prefetch" href="/assets/MySQL.html-BUgsWTbf.js" as="script"><link rel="prefetch" href="/assets/MySQLäº‹ä»¶.html-CRNulRdw.js" as="script"><link rel="prefetch" href="/assets/MySQLå¤‡ä»½æ¢å¤.html-D9d3BcAU.js" as="script"><link rel="prefetch" href="/assets/MySQLå­˜å‚¨è¿‡ç¨‹.html-DOUOuBKs.js" as="script"><link rel="prefetch" href="/assets/MySQLå®‰è£…é…ç½®.html-BZoWGdyL.js" as="script"><link rel="prefetch" href="/assets/index.html-CGUC_qn2.js" as="script"><link rel="prefetch" href="/assets/mysql-udfå®‰è£….html-6DAcmcjm.js" as="script"><link rel="prefetch" href="/assets/å…³ç³»å‹SQLæ ‡å‡†.html-ex1Bm8HB.js" as="script"><link rel="prefetch" href="/assets/å…³ç³»å‹æ•°æ®åº“.html-9D3zgHWu.js" as="script"><link rel="prefetch" href="/assets/GoGUI.html-Dqdn13G5.js" as="script"><link rel="prefetch" href="/assets/Goçˆ¬è™«.html-B5-bNh-r.js" as="script"><link rel="prefetch" href="/assets/Goç¬”è®°.html-BWHQwkb2.js" as="script"><link rel="prefetch" href="/assets/Goç¬¬ä¸‰æ–¹åº“.html-De_NVmqM.js" as="script"><link rel="prefetch" href="/assets/Goç¼–è¯‘æ‰“åŒ….html-DXjfV4dV.js" as="script"><link rel="prefetch" href="/assets/index.html-JUNmpdtg.js" as="script"><link rel="prefetch" href="/assets/Chromium.html-D4CqvCMJ.js" as="script"><link rel="prefetch" href="/assets/Eclipse.html-d_-zkURR.js" as="script"><link rel="prefetch" href="/assets/Gitä½¿ç”¨.html-BiXhej6d.js" as="script"><link rel="prefetch" href="/assets/GitæœåŠ¡.html-CRQPOwxj.js" as="script"><link rel="prefetch" href="/assets/IDEAä½¿ç”¨.html-CQAwa3ym.js" as="script"><link rel="prefetch" href="/assets/IDEAæ’ä»¶.html-BVlqb-aI.js" as="script"><link rel="prefetch" href="/assets/index.html-BPLgh8dq.js" as="script"><link rel="prefetch" href="/assets/Subversion.html-DB_QRxcx.js" as="script"><link rel="prefetch" href="/assets/TextEditor.html-De1T2y8m.js" as="script"><link rel="prefetch" href="/assets/VisualStudioCode.html-Dfs6Xrq2.js" as="script"><link rel="prefetch" href="/assets/è½¯ä»¶å®‰å…¨.html-CU-1i7rH.js" as="script"><link rel="prefetch" href="/assets/CAS-Shiro.html-BCx7aHWu.js" as="script"><link rel="prefetch" href="/assets/JDKå®‰è£…é…ç½®.html-BuZd8K-H.js" as="script"><link rel="prefetch" href="/assets/JDKå·¥å…·.html-Z_pF7auU.js" as="script"><link rel="prefetch" href="/assets/JavaGUI.html-D3vCb77G.js" as="script"><link rel="prefetch" href="/assets/Javaæ„å»ºç®¡ç†.html-CWy0GNlA.js" as="script"><link rel="prefetch" href="/assets/Javaæ³¨è§£.html-CoFQ9tum.js" as="script"><link rel="prefetch" href="/assets/Javaç¬”è®°.html-D73mvq7q.js" as="script"><link rel="prefetch" href="/assets/Javaç¬¬ä¸‰æ–¹åº“.html-C_KxxsBF.js" as="script"><link rel="prefetch" href="/assets/ORM.html-Dz3Zy4Nb.js" as="script"><link rel="prefetch" href="/assets/index.html-Y_Szzm3z.js" as="script"><link rel="prefetch" href="/assets/SPI.html-_as7Q2ya.js" as="script"><link rel="prefetch" href="/assets/Spring.html-DA_KxFam.js" as="script"><link rel="prefetch" href="/assets/Tomcat.html-C7GTVXEO.js" as="script"><link rel="prefetch" href="/assets/Bookmarks.html-DJY0sl3a.js" as="script"><link rel="prefetch" href="/assets/Markdown.html-DIJzdArn.js" as="script"><link rel="prefetch" href="/assets/index.html-DWOanf3O.js" as="script"><link rel="prefetch" href="/assets/ä¸“ä¸šæœ¯è¯­.html-BdSS2CC_.js" as="script"><link rel="prefetch" href="/assets/ä¹¦ç±å’Œåšå®¢.html-BfyjNdAA.js" as="script"><link rel="prefetch" href="/assets/å…è´¹æœåŠ¡.html-C4hlWLD5.js" as="script"><link rel="prefetch" href="/assets/C.html-B55IyDTK.js" as="script"><link rel="prefetch" href="/assets/CPlusPlus.html-BQrh8js4.js" as="script"><link rel="prefetch" href="/assets/CSharp.html-BgTazqt0.js" as="script"><link rel="prefetch" href="/assets/index.html-b9wjuAsG.js" as="script"><link rel="prefetch" href="/assets/Rust.html-D_Oofy4S.js" as="script"><link rel="prefetch" href="/assets/ä¸­é—´ä»¶.html-BV4p47nF.js" as="script"><link rel="prefetch" href="/assets/äº¤äº’åè®®.html-BHkOKJAm.js" as="script"><link rel="prefetch" href="/assets/äººå·¥æ™ºèƒ½.html-BwoIOKPN.js" as="script"><link rel="prefetch" href="/assets/åŠ å¯†è®¤è¯.html-C1b7lYEq.js" as="script"><link rel="prefetch" href="/assets/å®¹å™¨è™šæ‹Ÿæœº.html-BR5l9jnh.js" as="script"><link rel="prefetch" href="/assets/æŠ€æœ¯æ¦‚å¿µ.html-CEsaUXiQ.js" as="script"><link rel="prefetch" href="/assets/æ–‡æ¡£å¤„ç†.html-BAS-08c5.js" as="script"><link rel="prefetch" href="/assets/ç¡¬ä»¶äº¤äº’.html-Cf31swWH.js" as="script"><link rel="prefetch" href="/assets/ç¼–ç¨‹è§„èŒƒ.html-2rDM6nZO.js" as="script"><link rel="prefetch" href="/assets/è¡¨è¾¾å¼å’Œç¼–ç .html-COH4Dbkm.js" as="script"><link rel="prefetch" href="/assets/è·¨å¹³å°åº”ç”¨.html-C9IIOlR_.js" as="script"><link rel="prefetch" href="/assets/index.html-Cumt-IBD.js" as="script"><link rel="prefetch" href="/assets/PythonGUI.html-CZq-IxN3.js" as="script"><link rel="prefetch" href="/assets/Pythonçˆ¬è™«.html-CAyszHlM.js" as="script"><link rel="prefetch" href="/assets/Pythonç¬”è®°.html-BPZLtnwq.js" as="script"><link rel="prefetch" href="/assets/Pythonç¬¬ä¸‰æ–¹åº“.html-GeciT01v.js" as="script"><link rel="prefetch" href="/assets/index.html-BpQOXg1p.js" as="script"><link rel="prefetch" href="/assets/PowerShell.html-Bg2NVXWm.js" as="script"><link rel="prefetch" href="/assets/PowerShellå‘½ä»¤.html-DPTdr9i1.js" as="script"><link rel="prefetch" href="/assets/index.html-LhUSDJsc.js" as="script"><link rel="prefetch" href="/assets/ShellScript.html-DoJAdQaP.js" as="script"><link rel="prefetch" href="/assets/ShellWindows.html-BsRxKJyN.js" as="script"><link rel="prefetch" href="/assets/Shellå‘½ä»¤.html-DIyhEqum.js" as="script"><link rel="prefetch" href="/assets/WindowsBatch.html-CFBWgWwc.js" as="script"><link rel="prefetch" href="/assets/WindowsJScript.html-BlY-6_lY.js" as="script"><link rel="prefetch" href="/assets/WindowsScript.html-BG9FUxoN.js" as="script"><link rel="prefetch" href="/assets/WindowsVBAScript.html-pvs9JH_w.js" as="script"><link rel="prefetch" href="/assets/WindowsVBScript.html-fU-he7Ru.js" as="script"><link rel="prefetch" href="/assets/Android.html-MKripJdK.js" as="script"><link rel="prefetch" href="/assets/CentOS.html-MK3q9x_5.js" as="script"><link rel="prefetch" href="/assets/IOS.html-enMOn_Ug.js" as="script"><link rel="prefetch" href="/assets/Linux.html-1xo29Mq7.js" as="script"><link rel="prefetch" href="/assets/Linuxç½‘ç»œé˜²ç«å¢™.html-V1nZ3qm1.js" as="script"><link rel="prefetch" href="/assets/Linuxé…ç½®.html-C9ucyhGF.js" as="script"><link rel="prefetch" href="/assets/index.html-CEQ_TQ3V.js" as="script"><link rel="prefetch" href="/assets/Windows.html-D9BF9APa.js" as="script"><link rel="prefetch" href="/assets/Windowsè½¯ä»¶.html-DAOyv_Ue.js" as="script"><link rel="prefetch" href="/assets/å†…ç½‘ç©¿é€.html-Bo3JPJHs.js" as="script"><link rel="prefetch" href="/assets/æŒ‚è½½ç½‘ç›˜.html-7yhc95Mf.js" as="script"><link rel="prefetch" href="/assets/æ–‡ä»¶å‹ç¼©è§£å‹.html-Cizhmo8f.js" as="script"><link rel="prefetch" href="/assets/é‚®ç®±æœåŠ¡.html-DbgOS5Vv.js" as="script"><link rel="prefetch" href="/assets/CSS.html-C_3ECy2j.js" as="script"><link rel="prefetch" href="/assets/HTML.html-CcdN5_il.js" as="script"><link rel="prefetch" href="/assets/JavaScript.html-2Vm_mOHt.js" as="script"><link rel="prefetch" href="/assets/JavaScriptæ¡†æ¶.html-CNssEIuN.js" as="script"><link rel="prefetch" href="/assets/JavaScriptç¬”è®°.html-D2txzn27.js" as="script"><link rel="prefetch" href="/assets/JavaScriptç¬¬ä¸‰æ–¹åº“.html-BQMovK4P.js" as="script"><link rel="prefetch" href="/assets/NodeJS.html-CJFGwWXL.js" as="script"><link rel="prefetch" href="/assets/index.html-BMiF_XWw.js" as="script"><link rel="prefetch" href="/assets/index.html-2m4NnAzL.js" as="script"><link rel="prefetch" href="/assets/index.html-bLO-kCmR.js" as="script"><link rel="prefetch" href="/assets/404.html-DDEf6dcP.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script"><link rel="prefetch" href="/assets/SearchResult-RDqiRldT.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/images/icons/logo.png" alt><!----><span class="vp-site-name hide-in-pad">onni</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/portfolio.html" aria-label="ä»‹ç»"><!--[--><span class="font-icon icon home" style=""></span><!--]-->ä»‹ç»<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/DBS/" aria-label="æ•°æ®åº“ç³»ç»Ÿ"><!---->æ•°æ®åº“ç³»ç»Ÿ<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/Go/" aria-label="Go"><!---->Go<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/Java/" aria-label="Java"><!---->Java<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/Other/" aria-label="å…¶ä»–"><!---->å…¶ä»–<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/source/" aria-label="ç½‘ç»œèµ„æº"><!---->ç½‘ç»œèµ„æº<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/IDE/" aria-label="IDE"><!---->IDE<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/PL/" aria-label="ç¼–ç¨‹è¯­è¨€ç›¸å…³"><!---->ç¼–ç¨‹è¯­è¨€ç›¸å…³<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/Python/" aria-label="Pythonç›¸å…³"><!---->Pythonç›¸å…³<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/Shell/" aria-label="Shellè„šæœ¬"><!---->Shellè„šæœ¬<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link route-link-active auto-link" href="/System/" aria-label="Systemé…ç½®"><!---->Systemé…ç½®<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/Web/" aria-label="Web"><!---->Web<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="å¿«æ·é“¾æ¥"><!--[--><!---->å¿«æ·é“¾æ¥<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">å¤–éƒ¨é“¾æ¥</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://www.onni.top" aria-label="onniå½±è§†" rel="noopener noreferrer" target="_blank"><!---->onniå½±è§†<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://tool.bajins.com" aria-label="è·å–XShell" rel="noopener noreferrer" target="_blank"><!---->è·å–XShell<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://rss.onni.top" aria-label="rss" rel="noopener noreferrer" target="_blank"><!---->rss<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://g.bajins.eu.org" aria-label="GitHubåä»£" rel="noopener noreferrer" target="_blank"><!---->GitHubåä»£<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://g.woetu.eu.org" aria-label="GitHubåä»£" rel="noopener noreferrer" target="_blank"><!---->GitHubåä»£<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://tr.bajins.com" aria-label="è°·æ­Œç¿»è¯‘" rel="noopener noreferrer" target="_blank"><!---->è°·æ­Œç¿»è¯‘<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://img.onni.top" aria-label="teleå›¾åºŠ" rel="noopener noreferrer" target="_blank"><!---->teleå›¾åºŠ<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://gemini.onni.top" aria-label="gemini" rel="noopener noreferrer" target="_blank"><!---->gemini<!----></a></li><li class="vp-dropdown-subitem"><a class="auto-link external-link" href="https://rsshub.onni.top" aria-label="rsshub" rel="noopener noreferrer" target="_blank"><!---->rsshub<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">å†…éƒ¨é“¾æ¥</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/files/" aria-label="æ–‡ä»¶ä¸‹è½½"><!---->æ–‡ä»¶ä¸‹è½½<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/Other/Bookmarks.html" aria-label="ä¹¦ç­¾"><!---->ä¹¦ç­¾<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/System/Windows%E8%BD%AF%E4%BB%B6.html" aria-label="Windowsè½¯ä»¶"><!---->Windowsè½¯ä»¶<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/Other/Markdown.html#å·¥å…·" aria-label="Markdownå·¥å…·"><!---->Markdownå·¥å…·<!----></a></li></ul></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/onni-top/nav-onni" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!--[--><button type="button" class="search-pro-button" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon" name="search"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">æœç´¢</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/" aria-label="ä½¿ç”¨"><!--[--><span class="font-icon icon home" style=""></span><!--]-->ä½¿ç”¨<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Go</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">IDE</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Java</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Pythonç›¸å…³</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Shellè„šæœ¬</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Systemé…ç½®</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/System/" aria-label="Systemé…ç½®"><!---->Systemé…ç½®<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/System/Android.html" aria-label="Android"><!---->Android<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/System/CentOS.html" aria-label="CentOS"><!---->CentOS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/System/IOS.html" aria-label="IOS"><!---->IOS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/System/Linux.html" aria-label="Linux"><!---->Linux<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/System/Linux%E7%BD%91%E7%BB%9C%E9%98%B2%E7%81%AB%E5%A2%99.html" aria-label="Linuxç½‘ç»œé˜²ç«å¢™"><!---->Linuxç½‘ç»œé˜²ç«å¢™<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/System/Linux%E9%85%8D%E7%BD%AE.html" aria-label="Linuxé…ç½®"><!---->Linuxé…ç½®<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/System/Nginx.html" aria-label="Nginx"><!---->Nginx<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/System/Windows.html" aria-label="Windows"><!---->Windows<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/System/Windows%E8%BD%AF%E4%BB%B6.html" aria-label="Windowsè½¯ä»¶"><!---->Windowsè½¯ä»¶<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/System/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F.html" aria-label="å†…ç½‘ç©¿é€"><!---->å†…ç½‘ç©¿é€<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/System/%E6%8C%82%E8%BD%BD%E7%BD%91%E7%9B%98.html" aria-label="æŒ‚è½½ç½‘ç›˜"><!---->æŒ‚è½½ç½‘ç›˜<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/System/%E6%96%87%E4%BB%B6%E5%8E%8B%E7%BC%A9%E8%A7%A3%E5%8E%8B.html" aria-label="æ–‡ä»¶å‹ç¼©è§£å‹"><!---->æ–‡ä»¶å‹ç¼©è§£å‹<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/System/%E9%82%AE%E7%AE%B1%E6%9C%8D%E5%8A%A1.html" aria-label="é‚®ç®±æœåŠ¡"><!---->é‚®ç®±æœåŠ¡<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Web</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ä¸‹è½½</span><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/portfolio.html" aria-label="ä»‹ç»"><!--[--><span class="font-icon icon home" style=""></span><!--]-->ä»‹ç»<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">å…¶ä»–</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">æ•°æ®åº“ç³»ç»Ÿ</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">æœ¬ç«™Project</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ç¼–ç¨‹è¯­è¨€ç›¸å…³</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ç½‘ç»œèµ„æº</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Nginx</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-09-11T04:49:22.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 16 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT16M"></span><!----><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<!----><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#flag">Flag</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ‰©å±•æ¨¡å—æ’ä»¶">æ‰©å±•æ¨¡å—æ’ä»¶</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ç¼–è¯‘å®‰è£…">ç¼–è¯‘å®‰è£…</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#location">location</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#è¯­æ³•è§„åˆ™">è¯­æ³•è§„åˆ™</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å†…éƒ¨è°ƒç”¨">å†…éƒ¨è°ƒç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»¥åç¼€è®¾ç½®è¿‡æœŸæ—¶é—´">ä»¥åç¼€è®¾ç½®è¿‡æœŸæ—¶é—´</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç¦æ­¢è®¿é—®æŸä¸ªç›®å½•">ç¦æ­¢è®¿é—®æŸä¸ªç›®å½•</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#rewriteè¯­æ³•">rewriteè¯­æ³•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#åˆ¤æ–­è¡¨è¾¾å¼">åˆ¤æ–­è¡¨è¾¾å¼</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å…¨å±€å˜é‡">å…¨å±€å˜é‡</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#åˆ¤æ–­user-agent">åˆ¤æ–­user_agent</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#proxy-passæŒ‡ä»¤">proxy_passæŒ‡ä»¤</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ—¥å¿—åˆ‡å‰²">æ—¥å¿—åˆ‡å‰²</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä¸»é…ç½®">ä¸»é…ç½®</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#åŠ¨é™åˆ†ç¦»é…ç½®">åŠ¨é™åˆ†ç¦»é…ç½®</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h1 id="nginx" tabindex="-1"><a class="header-anchor" href="#nginx"><span>Nginx</span></a></h1><nav class="table-of-contents"><ul><li><a aria-current="page" href="/System/Nginx.html#flag" class="router-link-active router-link-exact-active">Flag</a></li><li><a aria-current="page" href="/System/Nginx.html#æ‰©å±•æ¨¡å—æ’ä»¶" class="router-link-active router-link-exact-active">æ‰©å±•æ¨¡å—æ’ä»¶</a></li><li><a aria-current="page" href="/System/Nginx.html#ç¼–è¯‘å®‰è£…" class="router-link-active router-link-exact-active">ç¼–è¯‘å®‰è£…</a></li><li><a aria-current="page" href="/System/Nginx.html#location" class="router-link-active router-link-exact-active">location</a><ul><li><a aria-current="page" href="/System/Nginx.html#è¯­æ³•è§„åˆ™" class="router-link-active router-link-exact-active">è¯­æ³•è§„åˆ™</a></li><li><a aria-current="page" href="/System/Nginx.html#å†…éƒ¨è°ƒç”¨" class="router-link-active router-link-exact-active">å†…éƒ¨è°ƒç”¨</a></li><li><a aria-current="page" href="/System/Nginx.html#ä»¥åç¼€è®¾ç½®è¿‡æœŸæ—¶é—´" class="router-link-active router-link-exact-active">ä»¥åç¼€è®¾ç½®è¿‡æœŸæ—¶é—´</a></li><li><a aria-current="page" href="/System/Nginx.html#ç¦æ­¢è®¿é—®æŸä¸ªç›®å½•" class="router-link-active router-link-exact-active">ç¦æ­¢è®¿é—®æŸä¸ªç›®å½•</a></li></ul></li><li><a aria-current="page" href="/System/Nginx.html#rewriteè¯­æ³•" class="router-link-active router-link-exact-active">rewriteè¯­æ³•</a></li><li><a aria-current="page" href="/System/Nginx.html#åˆ¤æ–­è¡¨è¾¾å¼" class="router-link-active router-link-exact-active">åˆ¤æ–­è¡¨è¾¾å¼</a></li><li><a aria-current="page" href="/System/Nginx.html#å…¨å±€å˜é‡" class="router-link-active router-link-exact-active">å…¨å±€å˜é‡</a></li><li><a aria-current="page" href="/System/Nginx.html#åˆ¤æ–­user-agent" class="router-link-active router-link-exact-active">åˆ¤æ–­user_agent</a></li><li><a aria-current="page" href="/System/Nginx.html#proxy-passæŒ‡ä»¤" class="router-link-active router-link-exact-active">proxy_passæŒ‡ä»¤</a></li><li><a aria-current="page" href="/System/Nginx.html#æ—¥å¿—åˆ‡å‰²" class="router-link-active router-link-exact-active">æ—¥å¿—åˆ‡å‰²</a></li><li><a aria-current="page" href="/System/Nginx.html#ä¸»é…ç½®" class="router-link-active router-link-exact-active">ä¸»é…ç½®</a></li><li><a aria-current="page" href="/System/Nginx.html#åŠ¨é™åˆ†ç¦»é…ç½®" class="router-link-active router-link-exact-active">åŠ¨é™åˆ†ç¦»é…ç½®</a></li></ul></nav><h2 id="flag" tabindex="-1"><a class="header-anchor" href="#flag"><span>Flag</span></a></h2><ul><li><a href="https://github.com/nginx" target="_blank" rel="noopener noreferrer">https://github.com/nginx</a><ul><li><a href="http://nginx.org/en/download.html" target="_blank" rel="noopener noreferrer">https://nginx.org/en/download.html</a></li><li><a href="http://nginx.org/en/docs" target="_blank" rel="noopener noreferrer">https://nginx.org/en/docs</a></li></ul></li><li><a href="https://github.com/nginxinc" target="_blank" rel="noopener noreferrer">https://github.com/nginxinc</a></li><li><a href="https://github.com/h5bp/server-configs-nginx" target="_blank" rel="noopener noreferrer">https://github.com/h5bp/server-configs-nginx</a></li><li><a href="https://github.com/digitalocean/nginxconfig.io" target="_blank" rel="noopener noreferrer">https://github.com/digitalocean/nginxconfig.io</a><ul><li><a href="https://www.digitalocean.com/community/tools/nginx" target="_blank" rel="noopener noreferrer">https://www.digitalocean.com/community/tools/nginx</a></li></ul></li><li><a href="https://github.com/alibaba/tengine" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/tengine</a></li></ul><ul><li><a href="https://github.com/hfpp2012/nginx-tutorial" target="_blank" rel="noopener noreferrer">https://github.com/hfpp2012/nginx-tutorial</a></li><li>Nginx å…¥é—¨æŒ‡å— <a href="https://github.com/xuexb/learn-nginx" target="_blank" rel="noopener noreferrer">https://github.com/xuexb/learn-nginx</a></li><li><a href="https://iziyang.github.io/tags/nginx" target="_blank" rel="noopener noreferrer">æ ‡ç­¾: Nginx | åŸå°‘å­æ¨</a></li><li><a href="https://my.oschina.net/jsan/blog/125861" target="_blank" rel="noopener noreferrer">Nginx HTTPæ ¸å¿ƒæ¨¡å—æŒ‡ä»¤å’Œå†…ç½®å˜é‡ä¸­æ–‡è¯´æ˜</a></li><li><a href="https://blog.csdn.net/u014296316/article/details/80973530" target="_blank" rel="noopener noreferrer">nginx å˜é‡ä½¿ç”¨</a></li><li><a href="https://juejin.im/post/5ea931866fb9a043815146fb" target="_blank" rel="noopener noreferrer">Nginx ä»å…¥é—¨åˆ°å®è·µï¼Œä¸‡å­—è¯¦è§£</a></li><li><a href="https://segmentfault.com/blog/siguoya-nginx" target="_blank" rel="noopener noreferrer">Nginxä»å…¥é—¨åˆ°å®è·µ</a></li><li><a href="https://www.cnblogs.com/zjfjava/p/10947264.html" target="_blank" rel="noopener noreferrer">Nginxæµæ§</a></li><li><a href="https://segmentfault.com/a/1190000037788252" target="_blank" rel="noopener noreferrer">Nginx é«˜æ€§èƒ½ä¼˜åŒ–é…ç½®å®æˆ˜æ€»ç»“</a></li><li><a href="https://zhuanlan.zhihu.com/p/149946545" target="_blank" rel="noopener noreferrer">nginx ä¼˜åŒ–çš„å…­ç‚¹æ–¹æ³•</a></li><li><a href="https://juejin.cn/post/6844904122068680711" target="_blank" rel="noopener noreferrer">Nginx-æ€§èƒ½ä¼˜åŒ–</a></li><li><a href="https://jayshao.com/cloudflare-nginx-ssl" target="_blank" rel="noopener noreferrer">åšå®¢ä½¿ç”¨Cloudflareå’ŒNginxçš„ç›¸å…³é…ç½®</a></li><li><a href="https://blog.csdn.net/weixin_44623055/article/details/124715177" target="_blank" rel="noopener noreferrer">Nginxâ€”â€”Nginxè´Ÿè½½å‡è¡¡</a></li><li><a href="https://blog.csdn.net/liji133122/article/details/126667277" target="_blank" rel="noopener noreferrer">Nginx--æµé‡é™åˆ¶ï¼ˆæœ€æœ‰ç”¨çš„åŠŸèƒ½ä¹‹ä¸€ï¼‰</a></li></ul><ul><li>å¼€å‘å·¥å…·åŒ… <a href="https://github.com/vision5/ngx_devel_kit" target="_blank" rel="noopener noreferrer">https://github.com/vision5/ngx_devel_kit</a></li><li><a href="https://github.com/topics/nginx-configuration" target="_blank" rel="noopener noreferrer">https://github.com/topics/nginx-configuration</a></li><li><a href="https://github.com/NginxProxyManager/nginx-proxy-manager" target="_blank" rel="noopener noreferrer">https://github.com/NginxProxyManager/nginx-proxy-manager</a></li><li>é…ç½®ç”Ÿæˆ <a href="https://github.com/0xB4LINT/nginxconfig.io" target="_blank" rel="noopener noreferrer">https://github.com/0xB4LINT/nginxconfig.io</a></li><li>é…ç½®æ ¼å¼åŒ– <a href="https://github.com/vasilevich/nginxbeautifier" target="_blank" rel="noopener noreferrer">https://github.com/vasilevich/nginxbeautifier</a></li><li><a href="https://github.com/1connect/nginx-config-formatter" target="_blank" rel="noopener noreferrer">https://github.com/slomkowski/nginx-config-formatter</a></li><li><a href="https://github.com/nginx-proxy/nginx-proxy" target="_blank" rel="noopener noreferrer">https://github.com/nginx-proxy/nginx-proxy</a></li><li><a href="https://github.com/evertramos/nginx-proxy-automation" target="_blank" rel="noopener noreferrer">https://github.com/evertramos/nginx-proxy-automation</a></li><li><a href="https://github.com/onlyGuo/nginx-gui" target="_blank" rel="noopener noreferrer">https://github.com/onlyGuo/nginx-gui</a></li><li>æ–‡ä»¶æœåŠ¡å™¨ <a href="https://github.com/Naereen/Nginx-Fancyindex-Theme" target="_blank" rel="noopener noreferrer">https://github.com/Naereen/Nginx-Fancyindex-Theme</a></li><li><a href="https://github.com/aperezdc/ngx-fancyindex" target="_blank" rel="noopener noreferrer">https://github.com/aperezdc/ngx-fancyindex</a></li><li>ç›‘æ§è¯·æ±‚ <a href="https://github.com/lebinh/ngxtop" target="_blank" rel="noopener noreferrer">https://github.com/lebinh/ngxtop</a></li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># å¯åŠ¨</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nignx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/local/nginx/conf/nginx.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nginx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> `</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">pwd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/..</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> conf/nginx.conf</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># å¿«é€Ÿå…³é—­ï¼Œå¯èƒ½ä¸ä¿å­˜ç›¸å…³ä¿¡æ¯ï¼Œå¹¶è¿…é€Ÿç»ˆæ­¢webæœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nginx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> stop</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">kill</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> quit</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PID</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># å¹³ç¨³å…³é—­ï¼Œä¿å­˜ç›¸å…³ä¿¡æ¯ï¼Œæœ‰å®‰æ’çš„ç»“æŸwebæœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nginx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> quit</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># é‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nginx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> reopen</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># é‡è½½é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nginx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> reload</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># éªŒè¯é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nginx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -t</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ‰©å±•æ¨¡å—æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#æ‰©å±•æ¨¡å—æ’ä»¶"><span>æ‰©å±•æ¨¡å—æ’ä»¶</span></a></h2><ul><li><a href="https://www.nginx.com/resources/wiki/modules" target="_blank" rel="noopener noreferrer">https://www.nginx.com/resources/wiki/modules</a></li><li><a href="https://www.nginx.com/nginx-wiki/build/dirhtml/modules" target="_blank" rel="noopener noreferrer">https://www.nginx.com/nginx-wiki/build/dirhtml/modules</a></li><li><a href="https://github.com/search?q=nginx-module" target="_blank" rel="noopener noreferrer">https://github.com/search?q=nginx-module</a></li><li><a href="https://github.com/topics/nginx-module" target="_blank" rel="noopener noreferrer">https://github.com/topics/nginx-module</a></li></ul><ul><li>Luaå¤šç§æ‰©å±•æ¨¡å— <a href="https://github.com/openresty" target="_blank" rel="noopener noreferrer">https://github.com/openresty</a><ul><li><a href="https://openresty.org/cn" target="_blank" rel="noopener noreferrer">https://openresty.org/cn</a></li><li><a href="https://openresty-reference.readthedocs.io" target="_blank" rel="noopener noreferrer">https://openresty-reference.readthedocs.io</a></li><li><a href="https://honeypps.com/architect/introduction-of-openresty" target="_blank" rel="noopener noreferrer">OpenResty æ¦‚è¦åŠåŸç†ç§‘æ™®</a></li><li><a href="https://segmentfault.com/t/openresty" target="_blank" rel="noopener noreferrer">openresty çš„åŠ¨æ€ - SegmentFault æ€å¦</a></li><li><a href="https://www.nginx.com/resources/wiki/modules/lua" target="_blank" rel="noopener noreferrer">https://www.nginx.com/resources/wiki/modules/lua</a></li><li><a href="https://github.com/moonbingbing/openresty-best-practices" target="_blank" rel="noopener noreferrer">https://github.com/moonbingbing/openresty-best-practices</a></li><li><a href="https://github.com/gityf/ngx_lua_thrift" target="_blank" rel="noopener noreferrer">https://github.com/gityf/ngx_lua_thrift</a></li><li><a href="https://zhuanlan.zhihu.com/p/67904411" target="_blank" rel="noopener noreferrer">æµ…è°ˆOpenRestyä¸­çš„body_filter_by_lua*</a></li><li><a href="https://www.bilibili.com/read/cv5038242" target="_blank" rel="noopener noreferrer">ngx.reæ¨¡å—å’Œluaæ­£åˆ™åŒ¹é…çš„åŒºåˆ«</a><ul><li><a href="https://github.com/openresty/lua-nginx-module#ngxrematch" target="_blank" rel="noopener noreferrer">https://github.com/openresty/lua-nginx-module#ngxrematch</a></li></ul></li><li><a href="https://www.jianshu.com/p/5167325edb09" target="_blank" rel="noopener noreferrer">Openresty+luaå®ç°åŠ¨æ€upstream</a></li><li><a href="https://blog.csdn.net/force_eagle/article/details/51966333" target="_blank" rel="noopener noreferrer">NGINX ç»“åˆ lua åŠ¨æ€ä¿®æ”¹upstream</a></li></ul></li><li><a href="https://github.com/iresty/nginx-lua-module-zh-wiki" target="_blank" rel="noopener noreferrer">https://github.com/iresty/nginx-lua-module-zh-wiki</a></li><li><a href="https://github.com/loveshell/ngx_lua_waf" target="_blank" rel="noopener noreferrer">https://github.com/loveshell/ngx_lua_waf</a></li><li><a href="https://github.com/ledgetech/lua-resty-http" target="_blank" rel="noopener noreferrer">https://github.com/ledgetech/lua-resty-http</a></li><li><a href="https://github.com/3scale/cors-proxy" target="_blank" rel="noopener noreferrer">https://github.com/3scale/cors-proxy</a></li><li><a href="https://github.com/starjun/openstar" target="_blank" rel="noopener noreferrer">https://github.com/starjun/openstar</a></li><li><a href="https://github.com/zhouchangxun/ngx_healthcheck_module" target="_blank" rel="noopener noreferrer">https://github.com/zhouchangxun/ngx_healthcheck_module</a></li><li><a href="https://github.com/vozlt/nginx-module-vts" target="_blank" rel="noopener noreferrer">https://github.com/vozlt/nginx-module-vts</a></li><li><a href="https://gitee.com/tianhao26/openresty_forwarding_log" target="_blank" rel="noopener noreferrer">https://gitee.com/tianhao26/openresty_forwarding_log</a></li><li>å¿ƒè·³æ£€æµ‹ <a href="https://github.com/yaoweibin/nginx_upstream_check_module" target="_blank" rel="noopener noreferrer">https://github.com/yaoweibin/nginx_upstream_check_module</a></li><li><a href="https://github.com/cuber/ngx_http_google_filter_module" target="_blank" rel="noopener noreferrer">https://github.com/cuber/ngx_http_google_filter_module</a><ul><li><a href="https://plusls.github.io/linux/nginx/configure-nginx-google-mirror" target="_blank" rel="noopener noreferrer">Nginx é…ç½®è°·æ­Œé•œåƒç«™</a></li></ul></li><li>æµåª’ä½“ <a href="https://github.com/arut/nginx-rtmp-module" target="_blank" rel="noopener noreferrer">https://github.com/arut/nginx-rtmp-module</a></li></ul><h2 id="ç¼–è¯‘å®‰è£…" tabindex="-1"><a class="header-anchor" href="#ç¼–è¯‘å®‰è£…"><span>ç¼–è¯‘å®‰è£…</span></a></h2><ul><li><a href="https://juejin.cn/post/6868289389722763272" target="_blank" rel="noopener noreferrer">Nginx æ ¸å¿ƒæ¨¡å—ä¸é…ç½®å®è·µ</a></li></ul><p><strong>openssl: error while loading shared libraries: libssl.so.1.1: cannot open shared object file</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># æŸ¥æ‰¾ä¸€ä¸‹libssl.so.1.1çš„ä½ç½®ï¼Œç„¶åé“¾æ¥åˆ°/usr/lib64/libssl.so.1.1å³å¯ã€‚</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">find</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> libssl.so.1.1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ln</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/local/lib64/libssl.so.1.1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  /usr/lib64/libssl.so.1.1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ln</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/local/lib64/libcrypto.so.1.1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  /usr/lib64/libcrypto.so.1.1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> version</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>libssl.so.1.1: cannot open shared object file: No such file or directory</strong></p><blockquote><p>Centos7 é»˜è®¤æä¾›çš„ openssl ç‰ˆæœ¬æ˜¯ 1.0.2ï¼ŒæŠ¥é”™æ˜¯å› ä¸ºopenssl åº“çš„å®‰è£…ä½ç½®ä¸æ­£ç¡®æˆ–æœªå®‰è£… 1.1 ä»¥ä¸Šç‰ˆæœ¬çš„é—®é¢˜</p></blockquote><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#ä»å®˜ç½‘ä¸‹è½½ï¼Œå»æ‰æ–‡ä»¶åï¼Œç›´æ¥è®¿é—®é“¾æ¥è·å–æœ€æ–°çš„åŒ…é“¾æ¥</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># wget https://www.openssl.org/source/openssl-1.1.1k.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#è…¾è®¯äº‘æä¾›çš„é•œåƒï¼Œå»æ‰æ–‡ä»¶åï¼Œç›´æ¥è®¿é—®é“¾æ¥è·å–æœ€æ–°çš„åŒ…é“¾æ¥</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://mirrors.cloud.tencent.com/openssl/source/openssl-1.1.1k.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tar</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -xvf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> openssl-1.1.1k.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> openssl-1.1.1k</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">yum</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gcc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> automake</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> autoconf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> libtool</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> make</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./config</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shared</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --openssldir=/usr/local/openssl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --prefix=/usr/local/openssl</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">make</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> clean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">make</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">make</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>openssl version</code> å¦‚æœçœ‹åˆ°ç‰ˆæœ¬å·è¿˜æ˜¯ä½ç‰ˆæœ¬</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;/usr/local/lib64/&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt;&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/etc/ld.so.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ldconfig</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿˜æ˜¯æœ‰é—®é¢˜æ‰§è¡Œä»¥ä¸‹æ–¹å¼</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># å¤‡ä»½</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/bin/openssl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/bin/openssl.old</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/lib/openssl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/lib/openssl.old</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># åˆ›å»ºè½¯é“¾æ¥</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ln</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/local/openssl/bin/openssl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/bin/openssl</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ln</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/local/openssl/include/openssl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/include/openssl</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># å†™é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;/usr/local/openssl/lib&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt;&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/etc/ld.so.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ldconfig</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -v</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="location" tabindex="-1"><a class="header-anchor" href="#location"><span>location</span></a></h2><h3 id="è¯­æ³•è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#è¯­æ³•è§„åˆ™"><span>è¯­æ³•è§„åˆ™</span></a></h3><div class="language-conf line-numbers-mode" data-highlighter="shiki" data-ext="conf" data-title="conf" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>location [=|~|~*|^~] /uri/ {</span></span>
<span class="line"><span>        Â·Â·Â·Â·Â· </span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä¿®é¥°ç¬¦å«ä¹‰</li></ul><table><thead><tr><th>è§„åˆ™</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>!~*</code></td><td>ä¸åŒºåˆ†å¤§å°å†™ï¼Œä½†ä¸åŒ¹é…çš„æ­£åˆ™</td></tr><tr><td><code>!~</code></td><td>åŒºåˆ†å¤§å°å†™ï¼Œä½†ä¸åŒ¹é…çš„æ­£åˆ™</td></tr><tr><td><code>/</code></td><td>é€šç”¨åŒ¹é…ï¼Œä»»ä½•è¯·æ±‚éƒ½ä¼šåŒ¹é…åˆ°</td></tr><tr><td><code>@</code></td><td>å®šä¹‰ä¸€ä¸ªå†…éƒ¨å‘½åçš„åŒ¹é…ï¼ˆ<a href="https://blog.sometimesnaive.org/article/72" target="_blank" rel="noopener noreferrer">ç­‰é˜¶äº<code>internal</code></a>ï¼‰ï¼Œé€‚ç”¨äº<code>error_page</code>,<code>try_files</code></td></tr><tr><td><code>^~</code></td><td>uriä»¥æŸä¸ªå¸¸è§„å­—ç¬¦ä¸²å¼€å¤´ï¼Œå¦‚è¯·æ±‚ä¸º<code>/static/20%/aa</code>ï¼ŒåŒ¹é…è§„åˆ™<code>^~ /static/ /aa</code></td></tr><tr><td><code>~*</code></td><td>ä¸åŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é…</td></tr><tr><td><code>~</code></td><td>åŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é…</td></tr><tr><td><code>=</code></td><td>ç²¾ç¡®åŒ¹é…</td></tr></tbody></table><ul><li>å½“æˆ‘ä»¬æœ‰å¤šä¸ª<code>location</code>é…ç½®çš„æƒ…å†µä¸‹ï¼Œå…¶åŒ¹é…é¡ºåºä¸º</li></ul><ol><li>å¸¦æœ‰<code>=</code>çš„ç²¾ç¡®åŒ¹é…ä¼˜å…ˆ</li><li>æ²¡æœ‰ä¿®é¥°ç¬¦çš„ç²¾ç¡®åŒ¹é…</li><li>æ­£åˆ™è¡¨è¾¾å¼æŒ‰ç…§ä»–ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„é¡ºåº</li><li>å¸¦æœ‰<code>^~</code>ä¿®é¥°ç¬¦çš„ï¼Œå¼€å¤´åŒ¹é…</li><li>å¸¦æœ‰<code>~</code>ã€<code>~*</code>ä¿®é¥°ç¬¦çš„ï¼Œå¦‚æœæ­£åˆ™è¡¨è¾¾å¼ä¸<code>URI</code>åŒ¹é…</li><li>æ²¡æœ‰ä¿®é¥°ç¬¦çš„ï¼Œå¦‚æœæŒ‡å®šå­—ç¬¦ä¸²ä¸<code>URI</code>å¼€å¤´åŒ¹é…</li></ol><p><strong>ç¤ºä¾‹</strong></p><ul><li><a href="https://mp.weixin.qq.com/s/eMXrIaTRpoyZdPsoF_tMCQ" target="_blank" rel="noopener noreferrer">nginxçš„rootå’Œaliasè¯¦è§£</a></li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># åŒ¹é…ç½‘ç«™æ ¹ï¼Œé€šè¿‡åŸŸåè®¿é—®ç½‘ç«™é¦–é¡µæ¯”è¾ƒé¢‘ç¹ï¼Œä½¿ç”¨è¿™ä¸ªä¼šåŠ é€Ÿå¤„ç†ï¼Œå®˜ç½‘å¦‚æ˜¯è¯´ã€‚</span></span>
<span class="line"><span># è¿™é‡Œæ˜¯ç›´æ¥è½¬å‘ç»™åç«¯åº”ç”¨æœåŠ¡å™¨äº†ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªé™æ€é¦–é¡µ</span></span>
<span class="line"><span>location = / {</span></span>
<span class="line"><span>   #åŒ¹é…http://localhost/</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>location = /login {</span></span>
<span class="line"><span>   #åŒ¹é…http://localhost/login</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span># ç¬¬äºŒä¸ªå¿…é€‰è§„åˆ™æ˜¯å¤„ç†é™æ€æ–‡ä»¶è¯·æ±‚ï¼Œè¿™æ˜¯ nginx ä½œä¸º http æœåŠ¡å™¨çš„å¼ºé¡¹</span></span>
<span class="line"><span># æœ‰ä¸¤ç§é…ç½®æ¨¡å¼ï¼Œç›®å½•åŒ¹é…æˆ–åç¼€åŒ¹é…,ä»»é€‰å…¶ä¸€æˆ–æ­é…ä½¿ç”¨</span></span>
<span class="line"><span>location ^~ /static/ {</span></span>
<span class="line"><span>   #åŒ¹é…http://localhost/static/a.htmlï¼Œhttp://localhost/static/c.png</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>location ~ \.(gif|jpg|png|js|css)$ {</span></span>
<span class="line"><span>   #åŒ¹é…http://localhost/a.gif, http://localhost/b.jpg</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>location ~* \.png$ {</span></span>
<span class="line"><span>   #http://localhost/a.PNG</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>location !~ \.xhtml$ {</span></span>
<span class="line"><span>   #åŒ¹é…http://localhost/a.XHTML</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>location !~* \.xhtml$ {</span></span>
<span class="line"><span>   #åŒ¹é…http://localhost/a.jsp</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span># é€šç”¨è§„åˆ™ï¼Œç”¨æ¥è½¬å‘åŠ¨æ€è¯·æ±‚åˆ°åç«¯åº”ç”¨æœåŠ¡å™¨</span></span>
<span class="line"><span># éé™æ€æ–‡ä»¶è¯·æ±‚å°±é»˜è®¤æ˜¯åŠ¨æ€è¯·æ±‚</span></span>
<span class="line"><span>location / {</span></span>
<span class="line"><span>   #åŒ¹é…http://localhost/registerï¼Œhttp://localhost/category/id/1111</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å†…éƒ¨è°ƒç”¨" tabindex="-1"><a class="header-anchor" href="#å†…éƒ¨è°ƒç”¨"><span>å†…éƒ¨è°ƒç”¨</span></a></h3><p><strong><code>internal</code></strong></p><blockquote><p><code>internal</code> æŒ‡ä»¤ç”¨äºæŒ‡å®šåªå…è®¸æ¥è‡ªæœ¬åœ° <code>Nginx</code> çš„å†…éƒ¨è°ƒç”¨ï¼Œæ¥è‡ªå¤–éƒ¨çš„è®¿é—®ä¼šç›´æ¥è¿”å› <code>404 not found</code> çŠ¶æ€ã€‚</p></blockquote><div class="language-conf line-numbers-mode" data-highlighter="shiki" data-ext="conf" data-title="conf" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># å®šä¹‰ä¸€ä¸ªå†…éƒ¨è°ƒç”¨location</span></span>
<span class="line"><span>location /internal/ {</span></span>
<span class="line"><span>    internal;</span></span>
<span class="line"><span>    # https://nginx.org/en/docs/http/ngx_http_proxy_module.html</span></span>
<span class="line"><span>    proxy_pass http://192.168.1.110:8091;</span></span>
<span class="line"><span>    proxy_set_header Host $host;</span></span>
<span class="line"><span>    proxy_set_header X-Real-IP $remote_addr;</span></span>
<span class="line"><span>    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>
<span class="line"><span>    proxy_set_header REMOTE-HOST $remote_addr;</span></span>
<span class="line"><span>    # ä¿®æ”¹å“åº”å¤´ä¸­çš„&quot;Location&quot;å’Œ&quot;Refresh&quot;å­—æ®µ</span></span>
<span class="line"><span>    # è§£å†³https-&gt;nginx-&gt;http-&gt;tomcaté‡å®šå‘é—®é¢˜</span></span>
<span class="line"><span>    proxy_redirect ~^http://([^:]+)(:\d+)?(.*)$ https://$1$3;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span># ä½¿ç”¨rewrite å†…éƒ¨é‡å®šå‘ï¼Œå…¶ä¸­ last æˆ– break å‡å¯æä¾›å†…éƒ¨é‡å®šå‘ã€‚</span></span>
<span class="line"><span>location / {</span></span>
<span class="line"><span>    rewrite .* /internal/ last;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span># åˆ©ç”¨ Openresty çš„ ngx.exec æ¨¡å—</span></span>
<span class="line"><span>location / {</span></span>
<span class="line"><span>    access_by_lua_block {</span></span>
<span class="line"><span>        return ngx.exec(&quot;/internal/&quot;)</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong><code>location @name</code></strong></p><blockquote><p>å‘½ålocationä¸­ä¸èƒ½å†åµŒå¥—å…¶å®ƒçš„å‘½ålocationã€‚</p></blockquote><div class="language-conf line-numbers-mode" data-highlighter="shiki" data-ext="conf" data-title="conf" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># åŒ¹é…é™æ€æ–‡ä»¶</span></span>
<span class="line"><span>location ~ .*\.(htm|html|js|css|jpg|png|gif|eot|svg|ttf|woff|woff2)$ {</span></span>
<span class="line"><span>    # å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨</span></span>
<span class="line"><span>    #if (!-f $request_filename) {</span></span>
<span class="line"><span>        #content_by_lua_block {</span></span>
<span class="line"><span>                #ngx.exec(&quot;@pass&quot;);</span></span>
<span class="line"><span>        #}</span></span>
<span class="line"><span>    #}</span></span>
<span class="line"><span>    root /www/wwwroot/api;</span></span>
<span class="line"><span>    # æŒ‰é¡ºåºæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œè¿”å›ç¬¬ä¸€ä¸ªæ‰¾åˆ°çš„æ–‡ä»¶ã€‚ç»“å°¾çš„æ–œçº¿è¡¨ç¤ºä¸ºæ–‡ä»¶å¤¹ -$uri/ã€‚</span></span>
<span class="line"><span>    # å¦‚æœæ‰€æœ‰çš„æ–‡ä»¶éƒ½æ‰¾ä¸åˆ°ï¼Œä¼šè¿›è¡Œä¸€ä¸ªå†…éƒ¨é‡å®šå‘åˆ°æœ€åä¸€ä¸ªå‚æ•°</span></span>
<span class="line"><span>    try_files $uri $uri/ @pass;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span># é€šç”¨åŒ¹é…</span></span>
<span class="line"><span>location / {</span></span>
<span class="line"><span>    # æˆ–è€…ä½¿ç”¨`ngx.exec`ä¸»è¦å®ç°çš„æ˜¯å†…éƒ¨çš„é‡å®šå‘</span></span>
<span class="line"><span>    # `ngx.redirect`æ˜¯å¤–éƒ¨é‡å®šå‘</span></span>
<span class="line"><span>    content_by_lua_block {</span></span>
<span class="line"><span>        ngx.exec(&quot;@pass&quot;);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>location @pass {</span></span>
<span class="line"><span>    # https://nginx.org/en/docs/http/ngx_http_proxy_module.html</span></span>
<span class="line"><span>    proxy_pass http://192.168.1.110:8091;</span></span>
<span class="line"><span>    proxy_set_header Host $host;</span></span>
<span class="line"><span>    proxy_set_header X-Real-IP $remote_addr;</span></span>
<span class="line"><span>    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>
<span class="line"><span>    proxy_set_header REMOTE-HOST $remote_addr;</span></span>
<span class="line"><span>    # ä¿®æ”¹å“åº”å¤´ä¸­çš„&quot;Location&quot;å’Œ&quot;Refresh&quot;å­—æ®µ</span></span>
<span class="line"><span>    # è§£å†³https-&gt;nginx-&gt;http-&gt;tomcaté‡å®šå‘é—®é¢˜</span></span>
<span class="line"><span>    proxy_redirect ~^http://([^:]+)(:\d+)?(.*)$  https://$1$3;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä»¥åç¼€è®¾ç½®è¿‡æœŸæ—¶é—´" tabindex="-1"><a class="header-anchor" href="#ä»¥åç¼€è®¾ç½®è¿‡æœŸæ—¶é—´"><span>ä»¥åç¼€è®¾ç½®è¿‡æœŸæ—¶é—´</span></a></h3><div class="language-conf line-numbers-mode" data-highlighter="shiki" data-ext="conf" data-title="conf" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>location ~* \.(js|css|jpg|jpeg|gif|png|swf)$ {</span></span>
<span class="line"><span>    if (-f $request_filename) {</span></span>
<span class="line"><span>        expires 1h;</span></span>
<span class="line"><span>        break;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç¦æ­¢è®¿é—®æŸä¸ªç›®å½•" tabindex="-1"><a class="header-anchor" href="#ç¦æ­¢è®¿é—®æŸä¸ªç›®å½•"><span>ç¦æ­¢è®¿é—®æŸä¸ªç›®å½•</span></a></h3><div class="language-conf line-numbers-mode" data-highlighter="shiki" data-ext="conf" data-title="conf" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>location ~* \.(txt|doc)${</span></span>
<span class="line"><span>    root /data/www/wwwroot/linuxtone/test;</span></span>
<span class="line"><span>    deny all;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="rewriteè¯­æ³•" tabindex="-1"><a class="header-anchor" href="#rewriteè¯­æ³•"><span>rewriteè¯­æ³•</span></a></h2><ul><li><a href="https://blog.csdn.net/weixin_40792878/article/details/83316519" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/weixin_40792878/article/details/83316519</a></li></ul><blockquote><p>è¯¥æŒ‡ä»¤é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼çš„ä½¿ç”¨æ¥æ”¹å˜URI.å¯ä»¥åŒæ—¶å­˜åœ¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªæŒ‡ä»¤ï¼ŒæŒ‰ç…§é¡ºåºä¸€æ¬¡å¯¹URLè¿›è¡ŒåŒ¹é…å’Œå¤„ç†ã€‚</p></blockquote><blockquote><p>è¯¥æŒ‡ä»¤å¯ä»¥åœ¨<code>server</code>å—æˆ–è€…<code>location</code>å—ä¸­é…ç½®</p></blockquote><ul><li>è¯­æ³•ï¼š<code>rewrite regex replacement [flag];</code><ul><li><code>rewrite</code>æ˜¯å®ç°URLé‡å®šå‘çš„é‡è¦æŒ‡ä»¤ã€‚</li><li><code>regex</code>ç”¨æ¥åŒ¹é…URIçš„æ­£åˆ™è¡¨è¾¾å¼ï¼›</li><li><code>replacement</code>åŒ¹é…æˆåŠŸåç”¨æ¥æ›¿æ¢URIä¸­è¢«æˆªå–å†…å®¹çš„å­—ç¬¦ä¸²ï¼Œé»˜è®¤æƒ…å†µå¦‚æœè¯¥å­—ç¬¦ä¸²åŒ…å«â€œhttp://â€ã€&quot;https://&quot;å¼€å¤´ï¼Œåˆ™ä¸ä¼šç»§ç»­å‘ä¸‹å¯¹URIè¿›è¡Œå…¶ä»–å¤„ç†ã€‚ç›´æ¥è¿”å›é‡å†™çš„URIç»™å®¢æˆ·ç«¯</li><li><code>flag</code>ç”¨æ¥è®¾ç½®rewriteå¯¹URIçš„å¤„ç†è¡Œä¸º,åŒ…å«å¦‚ä¸‹æ•°æ®ï¼š</li></ul></li></ul><table><thead><tr><th>æ ‡è®°ç¬¦å·</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>last</td><td>ç»ˆæ­¢åœ¨æœ¬locationå—ä¸­å¤„ç†æ¥æ”¶åˆ°çš„URIï¼Œå¹¶å°†æ­¤å¤„é‡å†™çš„URIä½œä¸ºæ–°çš„URIä½¿ç”¨å…¶ä»–locationè¿›è¡Œå¤„ç†ã€‚ï¼ˆåªæ˜¯ç»ˆæ­¢å½“å‰locationçš„å¤„ç†ï¼‰</td></tr><tr><td>break</td><td>å°†æ­¤å¤„é‡å†™çš„URIä½œä¸ºä¸€ä¸ªæ–°çš„URIåœ¨å½“å‰locationä¸­ç»§ç»­æ‰§è¡Œï¼Œå¹¶ä¸ä¼šå°†æ–°çš„URIè½¬å‘å…¶ä»–locationã€‚</td></tr><tr><td>redirect</td><td>å°†é‡å†™åçš„URIè¿”å›ä¸ªå®¢æˆ·ç«¯ï¼ŒçŠ¶æ€ç æ˜¯302ï¼Œè¡¨æ˜ä¸´æ—¶é‡å®šå‘ï¼Œä¸»è¦ç”¨åœ¨replacementå­—ç¬¦ä¸²ä¸ä»¥â€œhttp://â€ï¼Œâ€œ https://â€æˆ–â€œ $schemeâ€ å¼€å¤´ï¼›</td></tr><tr><td>permanent</td><td>å°†é‡å†™çš„URIè¿”å›å®¢æˆ·ç«¯ï¼ŒçŠ¶æ€ç ä¸º301,æŒ‡æ˜æ˜¯æ°¸ä¹…é‡å®šå‘ï¼›</td></tr></tbody></table><p><strong>Redirect</strong></p><div class="language-conf line-numbers-mode" data-highlighter="shiki" data-ext="conf" data-title="conf" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>rewrite ^(.*) http://example.com$1 redirect;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>é˜²ç›—é“¾</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>location ~* \.(gif|jpg|swf)$ {</span></span>
<span class="line"><span>    valid_referers none blocked start.igrow.cn sta.igrow.cn;</span></span>
<span class="line"><span>    if ($invalid_referer) {</span></span>
<span class="line"><span>        rewrite ^/ http://$host/logo.png;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="åˆ¤æ–­è¡¨è¾¾å¼" tabindex="-1"><a class="header-anchor" href="#åˆ¤æ–­è¡¨è¾¾å¼"><span>åˆ¤æ–­è¡¨è¾¾å¼</span></a></h2><table><thead><tr><th>è¡¨è¾¾å¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>-d</code> å’Œ <code>!-d</code></td><td>ç”¨æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨ç›®å½•</td></tr><tr><td><code>-e</code> å’Œ <code>!-e</code></td><td>ç”¨æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ–‡ä»¶æˆ–ç›®å½•</td></tr><tr><td><code>-f</code> å’Œ <code>!-f</code></td><td>ç”¨æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ–‡ä»¶</td></tr><tr><td><code>-x</code> å’Œ <code>!-x</code></td><td>ç”¨æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å¯æ‰§è¡Œ</td></tr></tbody></table><h2 id="å…¨å±€å˜é‡" tabindex="-1"><a class="header-anchor" href="#å…¨å±€å˜é‡"><span>å…¨å±€å˜é‡</span></a></h2><p><strong>å¸¸è§å˜é‡</strong></p><table><thead><tr><th>å˜é‡</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>$arg_åç§°</code></td><td>URL ä¸­æŸä¸ªå…·ä½“å‚æ•°çš„å€¼</td></tr><tr><td><code>$args</code></td><td>è¿™ä¸ªå˜é‡ç­‰äºè¯·æ±‚è¡Œä¸­(GETè¯·æ±‚)çš„å‚æ•°ï¼ŒåŒ$query_string</td></tr><tr><td><code>$body_bytes_sent</code></td><td>ä¼ è¾“ç»™å®¢æˆ·ç«¯çš„å­—èŠ‚æ•°ï¼Œå“åº”å¤´ä¸è®¡ç®—åœ¨å†…ï¼›è¿™ä¸ªå˜é‡å’ŒApacheçš„mod_log_configæ¨¡å—ä¸­çš„&quot;%B&quot;å‚æ•°ä¿æŒå…¼å®¹</td></tr><tr><td><code>$bytes_sent</code></td><td>ä¼ è¾“ç»™å®¢æˆ·ç«¯çš„å­—èŠ‚æ•°</td></tr><tr><td><code>$content_length</code></td><td>HTTP è¯·æ±‚ä¸­æ ‡è¯†åŒ…ä½“é•¿åº¦çš„Content-Lengthå¤´éƒ¨çš„å€¼ï¼Œå¤´éƒ¨æ²¡æœ‰è¿™ä¸ªåˆ™ä¸ºç©º</td></tr><tr><td><code>$content_type</code></td><td>æ ‡è¯†è¯·æ±‚åŒ…ä½“ç±»å‹çš„Content-Type å¤´éƒ¨çš„å€¼</td></tr><tr><td><code>$cookie_åç§°</code></td><td>å®¢æˆ·ç«¯è¯·æ±‚Headerå¤´ä¸­çš„cookieå˜é‡ï¼Œå‰ç¼€&quot;$cookie_&quot;åŠ ä¸Šcookieåç§°çš„å˜é‡ï¼Œè¯¥å˜é‡çš„å€¼å³ä¸ºcookieåç§°çš„å€¼</td></tr><tr><td><code>$document_root</code></td><td>å½“å‰è¯·æ±‚åœ¨rootæŒ‡ä»¤ä¸­æŒ‡å®šçš„å€¼ã€‚</td></tr><tr><td><code>$document_uri</code></td><td>ä¸uriå®Œå…¨ç›¸åŒ</td></tr><tr><td><code>$host</code></td><td>è¯·æ±‚ä¸»æœºå¤´å­—æ®µï¼Œå¦åˆ™ä¸ºæœåŠ¡å™¨åç§°ã€‚</td></tr><tr><td><code>$http_cookie</code></td><td>å®¢æˆ·ç«¯cookieä¿¡æ¯</td></tr><tr><td><code>$http_host</code></td><td>è¯·æ±‚åœ°å€ï¼Œå³æµè§ˆå™¨ä¸­ä½ è¾“å…¥çš„åœ°å€ï¼ˆIPæˆ–åŸŸåï¼‰</td></tr><tr><td><code>$http_referer</code></td><td>urlè·³è½¬æ¥æº,ç”¨æ¥è®°å½•ä»é‚£ä¸ªé¡µé¢é“¾æ¥è®¿é—®è¿‡æ¥çš„</td></tr><tr><td><code>$http_user_agent</code></td><td>å®¢æˆ·ç«¯agentä¿¡æ¯</td></tr><tr><td><code>$http_x_forwarded_for</code></td><td>å½“å‰ç«¯æœ‰ä»£ç†æœåŠ¡å™¨æ—¶ï¼Œè®¾ç½®webèŠ‚ç‚¹è®°å½•å®¢æˆ·ç«¯åœ°å€çš„é…ç½®ï¼Œæ­¤å‚æ•°ç”Ÿæ•ˆçš„å‰ææ˜¯ä»£ç†æœåŠ¡å™¨ä¹Ÿè¦è¿›è¡Œç›¸å…³çš„x_forwarded_forè®¾ç½®</td></tr><tr><td><code>$http_åç§°</code></td><td>åŒ¹é…ä»»æ„è¯·æ±‚å¤´å­—æ®µï¼›å˜é‡åä¸­çš„ååŠéƒ¨åˆ†åç§°å¯ä»¥æ›¿æ¢æˆä»»æ„è¯·æ±‚å¤´å­—æ®µï¼Œå¦‚åœ¨é…ç½®æ–‡ä»¶ä¸­éœ€è¦è·å–httpè¯·æ±‚å¤´ï¼š&quot;Accept-Language&quot;ï¼Œ$http_accept_languageå³å¯</td></tr><tr><td><code>$https</code></td><td>å¦‚æœå¼€å¯äº†SSLå®‰å…¨æ¨¡å¼ï¼Œå€¼ä¸º&quot;on&quot;ï¼Œå¦åˆ™ä¸ºç©ºå­—ç¬¦ä¸²ã€‚</td></tr><tr><td><code>$is_args</code></td><td>å¦‚æœå·²ç»è®¾ç½®$argsï¼Œåˆ™è¯¥å˜é‡çš„å€¼ä¸º&quot;ï¼Ÿ&quot;ï¼Œå¦åˆ™ä¸º&quot;&quot;ã€‚</td></tr><tr><td><code>$limit_rate</code></td><td>è¿™ä¸ªå˜é‡å¯ä»¥é™åˆ¶è¿æ¥é€Ÿç‡ã€‚</td></tr><tr><td><code>$pipe</code></td><td>å¦‚æœè¯·æ±‚æ¥è‡ªç®¡é“é€šä¿¡ï¼Œå€¼ä¸º&quot;p&quot;ï¼Œå¦åˆ™ä¸º&quot;.&quot;</td></tr><tr><td><code>$query_string</code></td><td>ä¸argså˜é‡å®Œå…¨ç›¸åŒ</td></tr><tr><td><code>$realpath_root</code></td><td>å½“å‰è¯·æ±‚çš„æ–‡æ¡£æ ¹ç›®å½•æˆ–åˆ«åçš„çœŸå®è·¯å¾„ï¼Œä¼šå°†æ‰€æœ‰ç¬¦å·è¿æ¥è½¬æ¢ä¸ºçœŸå®è·¯å¾„</td></tr><tr><td><code>$remote_user</code></td><td>æœ‰HTTP Basic Authentication åè®®ä¼ å…¥çš„ç”¨æˆ·åï¼Œå·²ç»ç»è¿‡Auth Basic ModuleéªŒè¯çš„ç”¨æˆ·åã€‚</td></tr><tr><td><code>$request_body_file</code></td><td>å®¢æˆ·ç«¯è¯·æ±‚ä¸»ä½“ä¿¡æ¯çš„ä¸´æ—¶æ–‡ä»¶åã€‚</td></tr><tr><td><code>$request_body</code></td><td>å®¢æˆ·ç«¯çš„è¯·æ±‚ä¸»ä½“ï¼šæ­¤å˜é‡å¯åœ¨locationä¸­ä½¿ç”¨ï¼Œå°†è¯·æ±‚ä¸»ä½“é€šè¿‡proxy_passï¼Œfastcgi_passï¼Œuwsgi_passå’Œscgi_passä¼ é€’ç»™ä¸‹ä¸€çº§çš„ä»£ç†æœåŠ¡å™¨</td></tr><tr><td><code>$request_filename</code></td><td>å½“å‰è¯·æ±‚çš„æ–‡ä»¶è·¯å¾„ï¼Œç”±rootæˆ–aliasæŒ‡ä»¤ä¸URIè¯·æ±‚ç”Ÿæˆã€‚</td></tr><tr><td><code>$request_length</code></td><td>æ‰€æœ‰è¯·æ±‚å†…å®¹çš„å¤§å°ï¼ŒåŒ…æ‹¬è¯·æ±‚è¡Œï¼Œå¤´éƒ¨ï¼ŒåŒ…ä½“ç­‰</td></tr><tr><td><code>$request_method</code></td><td>å®¢æˆ·ç«¯è¯·æ±‚çš„åŠ¨ä½œï¼Œé€šå¸¸ä¸ºGETæˆ–POSTã€‚</td></tr><tr><td><code>$request_uri</code></td><td>åŒ…å«è¯·æ±‚å‚æ•°çš„åŸå§‹URIï¼Œä¸åŒ…å«ä¸»æœºåï¼Œå¦‚ï¼š&quot;/?dir=DeveloperTool&quot;ã€‚</td></tr><tr><td><code>$request</code></td><td>åŸå§‹çš„urlè¯·æ±‚ï¼Œå«æœ‰æ–¹æ³•å’Œåè®®ç‰ˆæœ¬</td></tr><tr><td><code>$scheme</code></td><td>HTTPåè®® HTTP æˆ–è€… HTTPS</td></tr><tr><td><code>$sent_http_åç§°</code></td><td>å¯ä»¥è®¾ç½®ä»»æ„httpå“åº”å¤´å­—æ®µï¼›å˜é‡åä¸­çš„ååŠéƒ¨åˆ†åç§°å¯ä»¥æ›¿æ¢æˆä»»æ„å“åº”å¤´å­—æ®µï¼Œå¦‚éœ€è¦è®¾ç½®å“åº”å¤´Content-lengthï¼Œ$sent_http_content_lengthå³å¯</td></tr><tr><td><code>$status</code></td><td>HTTPå“åº”ä»£ç </td></tr><tr><td><code>$uri</code></td><td>è¯·æ±‚çš„URIï¼Œä¸åŒ…å«ä¸»æœºåï¼Œä¸åŒ…å«?åçš„å‚æ•°</td></tr></tbody></table><blockquote><p><code>$request_body_file</code> å°†å®¢æˆ·ç«¯è¯·æ±‚ä¸»ä½“ä¿å­˜åœ¨ä¸´æ—¶æ–‡ä»¶ä¸­ã€‚æ–‡ä»¶å¤„ç†ç»“æŸåï¼Œæ­¤æ–‡ä»¶éœ€åˆ é™¤ã€‚å¦‚æœéœ€è¦æ‰§æ„å¼€å¯æ­¤åŠŸèƒ½ï¼Œ éœ€è¦è®¾ç½®<code>client_body_in_file_only</code>ã€‚å¦‚æœå°†æ¬¡æ–‡ä»¶ä¼ é€’ç»™åç«¯çš„ä»£ç†æœåŠ¡å™¨ï¼Œéœ€è¦ç¦ç”¨<code>request body</code>ï¼Œ å³è®¾ç½®<code>proxy_pass_request_body off</code>ï¼Œ<code>fastcgi_pass_request_body off</code>ï¼Œ <code>uwsgi_pass_request_body off</code>ï¼Œ<code>scgi_pass_request_body off</code></p></blockquote><p><strong>TCPç›¸å…³å˜é‡</strong></p><table><thead><tr><th>å˜é‡</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>$binary_remote_addr</code></td><td>å®¢æˆ·ç«¯åœ°è´¨çš„æ•´å‹æ ¼å¼ï¼Œå¯¹äºIPv4æ˜¯4å­—èŠ‚</td></tr><tr><td><code>$connection_requests</code></td><td>å½“å‰è¿æ¥ä¸Šæ‰§è¡Œè¿‡çš„è¯·æ±‚æ•°ï¼Œå¯¹keepalive æœ‰æ„ä¹‰</td></tr><tr><td><code>$connection</code></td><td>é€’å¢çš„è¿æ¥åºå·</td></tr><tr><td><code>$proxy_protocol_addr</code></td><td>è‹¥ä½¿ç”¨äº†proxy_protocol åè®®åˆ™è¿”å›åè®®ä¸­çš„åœ°å€</td></tr><tr><td><code>$proxy_protocol_port</code></td><td>è‹¥ä½¿ç”¨äº†proxy_protocol åè®®åˆ™è¿”å›åè®®ä¸­çš„ç«¯å£</td></tr><tr><td><code>$remote_addr</code></td><td>å®¢æˆ·ç«¯åœ°å€</td></tr><tr><td><code>$remote_port</code></td><td>å®¢æˆ·ç«¯ç«¯å£</td></tr><tr><td><code>$server_addr</code></td><td>æœåŠ¡å™¨ç«¯åœ°å€(æœ¬ç«¯åœ°å€)ï¼Œåœ¨å®Œæˆä¸€æ¬¡ç³»ç»Ÿè°ƒç”¨åå¯ä»¥ç¡®å®šè¿™ä¸ªå€¼ã€‚</td></tr><tr><td><code>$server_port</code></td><td>è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨çš„ç«¯å£å·ã€‚</td></tr><tr><td><code>$server_protocol</code></td><td>è¯·æ±‚ä½¿ç”¨çš„åè®®ï¼Œé€šå¸¸æ˜¯HTTP/1.0æˆ–HTTP/1.1ã€‚</td></tr><tr><td><code>$TCP_INFO</code></td><td>tcpå†…æ ¸å±‚å‚æ•°ï¼ˆ$tcpinfo_rtt,$tcpinfo_rttvar,$tcpinfo_snd_cwnd,$tcpinfo_rcv_spaceï¼‰</td></tr></tbody></table><p><strong>å¤„ç†è¯·æ±‚è¿‡ç¨‹ä¸­äº§ç”Ÿçš„å˜é‡</strong></p><table><thead><tr><th>å˜é‡</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>$request_completion</code></td><td>è‹¥è¯·æ±‚å¤„ç†å®Œåˆ™è¿”å›OKï¼Œå¦åˆ™ä¸ºç©º</td></tr><tr><td><code>$request_id</code></td><td>ä»¥16ç¦æ­¢è¾“å‡ºçš„è¯·æ±‚æ ‡è¯†idï¼Œéšå³ç”Ÿæˆ</td></tr><tr><td><code>$request_time</code></td><td>è¯·æ±‚å¤„ç†åˆ°ç°åœ¨çš„è€—æ—¶</td></tr><tr><td><code>$server_name</code></td><td>åŒ¹é…ä¸Šçš„è¯·æ±‚server_name</td></tr></tbody></table><p><strong>ç³»ç»Ÿå˜é‡</strong></p><table><thead><tr><th>å˜é‡</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>$hostname</code></td><td>ä¸ç³»ç»Ÿä¸Šè¾“å‡ºhostname ä¸€è‡´</td></tr><tr><td><code>$pid</code></td><td>æ‰€å±workerè¿›ç¨‹çš„id</td></tr><tr><td><code>$time_local</code></td><td>ä»¥æœ¬åœ°æ—¶é—´çš„æ ‡å‡†è¾“å‡º</td></tr><tr><td><code>$time_iso8601</code></td><td>æœåŠ¡å™¨æ—¶é—´çš„ISO 8610æ ¼å¼</td></tr><tr><td><code>$msec</code></td><td>å½“å‰çš„Unixæ—¶é—´æˆ³</td></tr><tr><td><code>$nginx_version</code></td><td>nginxç‰ˆæœ¬</td></tr></tbody></table><h2 id="åˆ¤æ–­user-agent" tabindex="-1"><a class="header-anchor" href="#åˆ¤æ–­user-agent"><span>åˆ¤æ–­user_agent</span></a></h2><div class="language-conf line-numbers-mode" data-highlighter="shiki" data-ext="conf" data-title="conf" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># è®¾ç½®å˜é‡</span></span>
<span class="line"><span>set $mobile_user_agent &quot;(MIDP)|(WAP)|(UP.Browser)|(Smartphone)</span></span>
<span class="line"><span>|(Obigo)|(Mobile)|(AU.Browser)|(wxd.Mms)|(WxdB.Browser)|(CLDC)</span></span>
<span class="line"><span>|(UP.Link)|(KM.Browser)|(UCWEB)|(SEMC-Browser)|(Mini)|(Symbian)</span></span>
<span class="line"><span>|(Palm)|(Nokia)|(Panasonic)|(MOT-)|(SonyEricsson)|(NEC-)|(Alcatel)</span></span>
<span class="line"><span>|(Ericsson)|(BENQ)|(BenQ)|(Amoisonic)|(Amoi-)|(Capitel)|(PHILIPS)</span></span>
<span class="line"><span>|(SAMSUNG)|(Lenovo)|(Mitsu)|(Motorola)|(SHARP)|(WAPPER)|(LG-)</span></span>
<span class="line"><span>|(LG/)|(EG900)|(CECT)|(Compal)|(kejian)|(Bird)|(BIRD)|(G900/V1.0)</span></span>
<span class="line"><span>|(Arima)|(CTL)|(TDG)|(Daxian)|(DAXIAN)|(DBTEL)|(Eastcom)|(EASTCOM)</span></span>
<span class="line"><span>|(PANTECH)|(Dopod)|(Haier)|(HAIER)|(KONKA)|(KEJIAN)|(LENOVO)</span></span>
<span class="line"><span>|(Soutec)|(SOUTEC)|(SAGEM)|(SEC-)|(SED-)|(EMOL-)|(INNO55)</span></span>
<span class="line"><span>|(ZTE)|(iPhone)|(Android)|(Windows CE)|(Wget)|(Java)|(curl)|(Opera)&quot;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># åˆ¤æ–­æ˜¯å¦ä¸ºç§»åŠ¨ç«¯è®¿é—®</span></span>
<span class="line"><span>if ( $http_user_agent ~ &quot;$mobile_user_agent&quot; ) {</span></span>
<span class="line"><span>    # é‡å†™URIä½œä¸ºä¸€ä¸ªæ–°çš„URIåœ¨å½“å‰locationä¸­ç»§ç»­æ‰§è¡Œã€‚</span></span>
<span class="line"><span>    # ç›®çš„æ˜¯åœ¨ifå—ä¸­proxy_passä¸èƒ½å¸¦URI</span></span>
<span class="line"><span>    rewrite ^ /URIå‚æ•°$1 break;</span></span>
<span class="line"><span>    proxy_pass https://127.0.0.1;</span></span>
<span class="line"><span>    #proxy_set_header Host $host;</span></span>
<span class="line"><span>    proxy_set_header X-Real-IP $remote_addr;</span></span>
<span class="line"><span>    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>
<span class="line"><span>    proxy_set_header REMOTE-HOST $remote_addr;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-conf line-numbers-mode" data-highlighter="shiki" data-ext="conf" data-title="conf" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># cloudflare é»˜è®¤ä¼šåœ¨headeré‡Œé¢åŠ ä¸Šâ€™HTTP_CF_IPCOUNTRYâ€™</span></span>
<span class="line"><span># ç¦æ­¢æŸäº›å›½å®¶, user agent çš„è®¿é—®ï¼Œé…ç½®åœ¨httpï¼ˆå…¨å±€ï¼‰</span></span>
<span class="line"><span>map $http_cf_ipcountry $allow {</span></span>
<span class="line"><span>    default yes;</span></span>
<span class="line"><span>    US no;</span></span>
<span class="line"><span>    CA no;</span></span>
<span class="line"><span>    UK no;</span></span>
<span class="line"><span>    AU no;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span># åœ¨serveræˆ–locationä¸­é…ç½®</span></span>
<span class="line"><span>if ($allow = no) {</span></span>
<span class="line"><span>    return 403;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="proxy-passæŒ‡ä»¤" tabindex="-1"><a class="header-anchor" href="#proxy-passæŒ‡ä»¤"><span>proxy_passæŒ‡ä»¤</span></a></h2><blockquote><p>nginxæ— æ³•åœ¨<code>proxy_pass</code>æŒ‡ä»¤ä¸­å¤„ç†æ‰€éœ€çš„URIéƒ¨åˆ†ï¼Œå› ä¸ºä½äºæŒ‡å®šçš„ä½ç½®ï¼ˆå› æ­¤æ˜¯é”™è¯¯æ¶ˆæ¯ï¼‰ã€‚ è¿™æ˜¯å› ä¸ºnginxæ˜¯ä»¥æ¨¡å—åŒ–çš„æ–¹å¼æ„å»ºçš„ï¼Œæ¯ä¸ªé…ç½®å—éƒ½æ˜¯ç”±å„ä¸ªæ¨¡å—åœ¨å„ä¸ªé˜¶æ®µè¯»å–çš„ã€‚</p></blockquote><ul><li><code>proxy_pass</code>åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ï¼ŒæŒ‡ä»¤ä¸­ä¸èƒ½æœ‰URI ï¼š <ul><li>æ­£åˆ™è¡¨è¾¾å¼ä½ç½®</li><li>å‘½åçš„åœ°ç‚¹</li><li>if å—</li></ul></li></ul><blockquote><p>è§£å†³æ–¹æ¡ˆå¯è§<a href="#%E5%88%A4%E6%96%ADuser-agent">åˆ¤æ–­<code>user_agent</code></a></p></blockquote><ul><li><code>proxy_set_header</code> è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯ç»™ä¸Šæ¸¸æœåŠ¡å™¨</li><li><code>add_header</code> è®¾ç½®å“åº”å¤´ä¿¡æ¯ç»™æµè§ˆå™¨</li></ul><h2 id="æ—¥å¿—åˆ‡å‰²" tabindex="-1"><a class="header-anchor" href="#æ—¥å¿—åˆ‡å‰²"><span>æ—¥å¿—åˆ‡å‰²</span></a></h2><blockquote><p>åœ¨<code>nginx.conf</code>ä¸­é…ç½®<code>log_format</code>ï¼ˆå¯ä»¥é…ç½®åœ¨<code>server</code>ä¸­ï¼‰ï¼Œå«ä¹‰æ˜¯é…ç½®äº†ä¸€ä¸ªåä¸º<code>main</code>çš„æ—¥å¿—æ ¼å¼åŒ–çš„è§„åˆ™ï¼Œåº”ç”¨åœ¨äº†<code>access_log</code>çš„æ—¥å¿—ä¸Š</p></blockquote><p><strong>ä½¿ç”¨åˆ°<code>timeiso8601</code>å†…åµŒå˜é‡æ¥è·å–æ—¶é—´é…ç½®æ—¥å¿—å¾ªç¯</strong></p><ul><li><a href="https://github.com/jingsam/jingsam.github.io/blob/source/source/_posts/2019-01-15-nginx-access-log.md" target="_blank" rel="noopener noreferrer">ç®€å•æå®šNginxæ—¥å¿—åˆ†å‰²</a></li></ul><div class="language-conf line-numbers-mode" data-highlighter="shiki" data-ext="conf" data-title="conf" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># å¯èƒ½å‡ºç°ifæ¡ä»¶ä¸æˆç«‹çš„æƒ…å†µï¼Œæ¨èåœ¨httpå—ä¸­ä½¿ç”¨map</span></span>
<span class="line"><span>if ($time_iso8601 ~ &quot;^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})&quot;) {</span></span>
<span class="line"><span>    set $year $1;</span></span>
<span class="line"><span>    set $month $2;</span></span>
<span class="line"><span>    set $day $3;</span></span>
<span class="line"><span>    set $hour $4;</span></span>
<span class="line"><span>    set $minutes $5;</span></span>
<span class="line"><span>    set $seconds $6;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>access_log logs/$year-$month-$day-$hour$minutes$seconds-access.log main;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Perlè¯­æ³•</span></span>
<span class="line"><span>if ($time_iso8601 ~ &quot;^(?&lt;year&gt;\d{4})-(?&lt;month&gt;\d{2})-(?&lt;day&gt;\d{2})&quot;) {}</span></span>
<span class="line"><span>access_log logs/$year-$month-$day-access.log main;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># httpå—ä¸­ä¸å…è®¸ä½¿ç”¨ifï¼Œä½¿ç”¨mapæ›¿ä»£</span></span>
<span class="line"><span>map $time_iso8601 $logdate {</span></span>
<span class="line"><span>    &#39;~^(?&lt;ymd&gt;\d{4}-\d{2}-\d{2}-\d{6})&#39;   $ymd;</span></span>
<span class="line"><span>    default                               &#39;nodate&#39;;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>access_log logs/access_${logdate}.log;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ—¥å¿—å½’æ¡£ç¨‹åºlogrotate</strong></p><ul><li><a href="https://github.com/fordmason/cronolog" target="_blank" rel="noopener noreferrer">https://github.com/fordmason/cronolog</a></li><li><a href="https://github.com/logrotate/logrotate" target="_blank" rel="noopener noreferrer">https://github.com/logrotate/logrotate</a></li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/logrotate.d/nginx</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p><code>kill -USR1 cat /usr/local/nginx/logs/nginx.pid</code> å‘nginxä¸»è¿›ç¨‹å‘é€USR1ä¿¡å·ç”¨äºé‡æ–°è¯»å–æ—¥å¿—æ–‡ä»¶</p></blockquote><div class="language-conf line-numbers-mode" data-highlighter="shiki" data-ext="conf" data-title="conf" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>/home/nginx/logs/*.log { # ç›®å½•ä¸‹æ‰€æœ‰ä»¥.logç»“å°¾çš„æ–‡ä»¶</span></span>
<span class="line"><span>    daily # æŒ‰å¤©åˆ‡å‰²</span></span>
<span class="line"><span>    #dateformat %Y%m%d # åˆ‡å‰²åæ–‡ä»¶åç¼€ï¼Œä¸èƒ½ä½¿ç”¨logï¼Œå¦åˆ™ä¼šä½¿æ–‡ä»¶è¿›è¡Œç»§ç»­åˆ‡å‰²</span></span>
<span class="line"><span>    #extension .log # åˆ‡å‰²æ–‡ä»¶åç¼€</span></span>
<span class="line"><span>    rotate 7 # ä¿ç•™å¤©æ•°</span></span>
<span class="line"><span>    #create 0640 root root   # åˆ‡å‰²åæ—¥å¿—æƒé™</span></span>
<span class="line"><span>    missingok</span></span>
<span class="line"><span>    dateext</span></span>
<span class="line"><span>    notifempty</span></span>
<span class="line"><span>    sharedscripts</span></span>
<span class="line"><span>    prerotate</span></span>
<span class="line"><span>        if [ -d /etc/logrotate.d/nginx ]; then \  # åˆ¤æ–­åˆ‡å‰²æ–‡ä»¶</span></span>
<span class="line"><span>            run-parts /etc/logrotate.d/nginx; \</span></span>
<span class="line"><span>        fi \</span></span>
<span class="line"><span>    endscript</span></span>
<span class="line"><span>    postrotate</span></span>
<span class="line"><span>        [ -e /usr/local/nginx/logs/nginx.pid ] &amp;&amp; kill -USR1 `cat /home/nginx/logs/nginx.pid`</span></span>
<span class="line"><span>    endscript</span></span>
<span class="line"><span>    postrotate</span></span>
<span class="line"><span>        [ ! -f /var/nginx.pid ] || kill -USR1 `cat /home/nginx/logs/nginx.pid`</span></span>
<span class="line"><span>    endscript</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¸»é…ç½®" tabindex="-1"><a class="header-anchor" href="#ä¸»é…ç½®"><span>ä¸»é…ç½®</span></a></h2><ul><li><a href="https://blog.csdn.net/DeliaPu/article/details/108647180" target="_blank" rel="noopener noreferrer">Nginxé…ç½®æ–‡ä»¶è§£æ</a></li><li><a href="https://www.cnblogs.com/wxxjianchi/p/13582252.html" target="_blank" rel="noopener noreferrer">nginx - HowOldAreYou - åšå®¢å›­</a></li></ul><div class="language-conf line-numbers-mode" data-highlighter="shiki" data-ext="conf" data-title="conf" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span></span></span>
<span class="line"><span>user www www;</span></span>
<span class="line"><span>worker_processes auto;</span></span>
<span class="line"><span>error_log /logs/nginx_error.log crit;</span></span>
<span class="line"><span>pid /logs/nginx.pid;</span></span>
<span class="line"><span>worker_rlimit_nofile 51200;</span></span>
<span class="line"><span>events {</span></span>
<span class="line"><span>    use epoll;</span></span>
<span class="line"><span>    worker_connections 51200;</span></span>
<span class="line"><span>    multi_accept on;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>http {</span></span>
<span class="line"><span>    # æ‰©å±•åä¸æ–‡ä»¶ç±»å‹æ˜ å°„è¡¨</span></span>
<span class="line"><span>    include mime.types;</span></span>
<span class="line"><span>    #include luawaf.conf;</span></span>
<span class="line"><span>    include proxy.conf;</span></span>
<span class="line"><span>    include /vhost/*.conf;</span></span>
<span class="line"><span>    # é»˜è®¤ç±»å‹</span></span>
<span class="line"><span>    default_type application/octet-stream;</span></span>
<span class="line"><span>    server_names_hash_bucket_size 512;</span></span>
<span class="line"><span>    # è®¾ç½®è¯·æ±‚ç¼“å†²</span></span>
<span class="line"><span>    client_header_buffer_size 32k;</span></span>
<span class="line"><span>    large_client_header_buffers 4 32k;</span></span>
<span class="line"><span>    client_max_body_size 500m;</span></span>
<span class="line"><span>    # å¼€å¯é«˜æ•ˆæ–‡ä»¶ä¼ è¾“æ¨¡å¼ï¼ŒsendfileæŒ‡ä»¤æŒ‡å®šnginxæ˜¯å¦è°ƒç”¨sendfileå‡½æ•°æ¥è¾“å‡ºæ–‡ä»¶ï¼Œå¯¹äºæ™®é€šåº”ç”¨è®¾ä¸º onï¼Œ</span></span>
<span class="line"><span>    # å¦‚æœç”¨æ¥è¿›è¡Œä¸‹è½½ç­‰åº”ç”¨ç£ç›˜ IOé‡è´Ÿè½½åº”ç”¨ï¼Œå¯è®¾ç½®ä¸ºoffï¼Œä»¥å¹³è¡¡ç£ç›˜ä¸ç½‘ç»œI/Oå¤„ç†é€Ÿåº¦ï¼Œ</span></span>
<span class="line"><span>    # é™ä½ç³»ç»Ÿçš„è´Ÿè½½ã€‚æ³¨æ„ï¼šå¦‚æœå›¾ç‰‡æ˜¾ç¤ºä¸æ­£å¸¸æŠŠè¿™ä¸ªæ”¹æˆoffã€‚</span></span>
<span class="line"><span>    sendfile on;</span></span>
<span class="line"><span>    tcp_nopush on;</span></span>
<span class="line"><span>    # è®¾ç½®è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ˜¯ç§’</span></span>
<span class="line"><span>    keepalive_timeout 60;</span></span>
<span class="line"><span>    tcp_nodelay on;</span></span>
<span class="line"><span>    fastcgi_connect_timeout 300;</span></span>
<span class="line"><span>    fastcgi_send_timeout 300;</span></span>
<span class="line"><span>    fastcgi_read_timeout 300;</span></span>
<span class="line"><span>    fastcgi_buffer_size 64k;</span></span>
<span class="line"><span>    fastcgi_buffers 4 64k;</span></span>
<span class="line"><span>    fastcgi_busy_buffers_size 128k;</span></span>
<span class="line"><span>    fastcgi_temp_file_write_size 256k;</span></span>
<span class="line"><span>    fastcgi_intercept_errors on;</span></span>
<span class="line"><span>    # å¼€å¯gzipå‹ç¼©</span></span>
<span class="line"><span>    gzip on;</span></span>
<span class="line"><span>    gzip_min_length 1k;</span></span>
<span class="line"><span>    gzip_buffers 4 16k;</span></span>
<span class="line"><span>    gzip_http_version 1.1;</span></span>
<span class="line"><span>    gzip_comp_level 2;</span></span>
<span class="line"><span>    gzip_types text/plain application/javascript application/x-javascript text/javascript text/css application/xml;</span></span>
<span class="line"><span>    gzip_vary on;</span></span>
<span class="line"><span>    gzip_proxied expired no-cache no-store private auth;</span></span>
<span class="line"><span>    gzip_disable &quot;MSIE [1-6]\.&quot;;</span></span>
<span class="line"><span>    limit_conn_zone $binary_remote_addr zone=perip:10m;</span></span>
<span class="line"><span>    limit_conn_zone $server_name zone=perserver:10m;</span></span>
<span class="line"><span>    server_tokens off;</span></span>
<span class="line"><span>    # å…³é—­æ—¥å¿—</span></span>
<span class="line"><span>    access_log off;</span></span>
<span class="line"><span>    # è¾“å‡ºæ—¥å¿—</span></span>
<span class="line"><span>    #error_log /dev/null;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="åŠ¨é™åˆ†ç¦»é…ç½®" tabindex="-1"><a class="header-anchor" href="#åŠ¨é™åˆ†ç¦»é…ç½®"><span>åŠ¨é™åˆ†ç¦»é…ç½®</span></a></h2><p><strong>é™æ€æ–‡ä»¶åœ¨æœ¬åœ°</strong></p><div class="language-conf line-numbers-mode" data-highlighter="shiki" data-ext="conf" data-title="conf" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>server {</span></span>
<span class="line"><span>    listen 80;</span></span>
<span class="line"><span>    listen 443 ssl http2;</span></span>
<span class="line"><span>    server_name www.woetu.com woetu.com;</span></span>
<span class="line"><span>    index index.html index.htm default.htm default.html;</span></span>
<span class="line"><span>    root html;</span></span>
<span class="line"><span>    # SSL-START SSLç›¸å…³é…ç½®ï¼Œè¯·å‹¿åˆ é™¤æˆ–ä¿®æ”¹ä¸‹ä¸€è¡Œå¸¦æ³¨é‡Šçš„404è§„åˆ™</span></span>
<span class="line"><span>    #error_page 404/404.html;</span></span>
<span class="line"><span>    # HTTP_TO_HTTPS_START</span></span>
<span class="line"><span>    if ($server_port !~ 443) {</span></span>
<span class="line"><span>        rewrite ^(/.*)$ https://$host$1 permanent;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    # HTTP_TO_HTTPS_END</span></span>
<span class="line"><span>    ssl_certificate /etc/letsencrypt/live/www/fullchain.pem;</span></span>
<span class="line"><span>    ssl_certificate_key /etc/letsencrypt/live/www/privkey.pem;</span></span>
<span class="line"><span>    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span></span>
<span class="line"><span>    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;</span></span>
<span class="line"><span>    ssl_prefer_server_ciphers on;</span></span>
<span class="line"><span>    ssl_session_cache shared:SSL:10m;</span></span>
<span class="line"><span>    ssl_session_timeout 10m;</span></span>
<span class="line"><span>    error_page 497 https://$host$request_uri;</span></span>
<span class="line"><span>    # SSL-END</span></span>
<span class="line"><span>    # ERROR-PAGE-START  é”™è¯¯é¡µé…ç½®ï¼Œå¯ä»¥æ³¨é‡Šã€åˆ é™¤æˆ–ä¿®æ”¹</span></span>
<span class="line"><span>    error_page 404 /404.html;</span></span>
<span class="line"><span>    error_page 502 /502.html;</span></span>
<span class="line"><span>    # ERROR-PAGE-END</span></span>
<span class="line"><span>    # PROXY-START/</span></span>
<span class="line"><span>    # é…ç½®é¦–é¡µï¼Œè¿™é‡Œå¿…é¡»è¦æœ‰ä¸€ä¸ª=å·</span></span>
<span class="line"><span>    location =/ {</span></span>
<span class="line"><span>        index index.html index.htm;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    # æ‹¦æˆªé™æ€æ–‡ä»¶åç¼€</span></span>
<span class="line"><span>    location ~ .*\.(htm|html|js|css|jpg|png|gif|eot|svg|ttf|woff|woff2)$ {</span></span>
<span class="line"><span>        # é…ç½®é™æ€èµ„æºåœ°å€</span></span>
<span class="line"><span>        root /home/html/index;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    # æ‹¦æˆªé™æ€æ–‡ä»¶åç¼€</span></span>
<span class="line"><span>    #location ~ \.(htm|html|js|css|jpg|png|gif|eot|svg|ttf|woff|woff2)$ {</span></span>
<span class="line"><span>    # é…ç½®é™æ€èµ„æºåœ°å€</span></span>
<span class="line"><span>    #        root /home/html/index;</span></span>
<span class="line"><span>    #}</span></span>
<span class="line"><span>    # åŠ¨æ€è¯·æ±‚è½¬å‘</span></span>
<span class="line"><span>    location ~.*$ {</span></span>
<span class="line"><span>        proxy_pass http://localhost:8080;</span></span>
<span class="line"><span>        proxy_set_header Host $host;</span></span>
<span class="line"><span>        proxy_set_header X-Real-IP $remote_addr;</span></span>
<span class="line"><span>        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>
<span class="line"><span>        proxy_set_header REMOTE-HOST $remote_addr;</span></span>
<span class="line"><span>        # è§£å†³https-&gt;nginx-&gt;http-&gt;tomcaté‡å®šå‘é—®é¢˜</span></span>
<span class="line"><span>        proxy_redirect ~^http://([^:]+)(:\d+)?(.*)$ https://$1$3;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    # PROXY-END/</span></span>
<span class="line"><span>    # ç¦æ­¢è®¿é—®çš„æ–‡ä»¶æˆ–ç›®å½•</span></span>
<span class="line"><span>    location ~ ^/(\.user.ini|\.htaccess|\.git|\.svn|\.project|LICENSE|README.md) {</span></span>
<span class="line"><span>        return 404;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    # ä¸€é”®ç”³è¯·SSLè¯ä¹¦éªŒè¯ç›®å½•ç›¸å…³è®¾ç½®</span></span>
<span class="line"><span>    location ~ \.well-known {</span></span>
<span class="line"><span>        allow all;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    access_log /logs/wwwlog;</span></span>
<span class="line"><span>    error_log /logs/wwwlog;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>é™æ€æ–‡ä»¶åœ¨é•œåƒå­˜å‚¨</strong></p><div class="language-conf line-numbers-mode" data-highlighter="shiki" data-ext="conf" data-title="conf" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>#PROXY-START/</span></span>
<span class="line"><span>location = / {</span></span>
<span class="line"><span>    #rewrite (.*) $1index.html;</span></span>
<span class="line"><span>    index /index.html;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span># æ‹¦æˆªé™æ€æ–‡ä»¶åç¼€</span></span>
<span class="line"><span>location ~ .*\.(htm|html|js|css|jpg|png|gif|eot|svg|ttf|woff|woff2)$|/static/ {</span></span>
<span class="line"><span>    # é…ç½®é™æ€èµ„æºåœ°å€</span></span>
<span class="line"><span>    #root ./vhost/html;</span></span>
<span class="line"><span>	root &quot;/index&quot;;</span></span>
<span class="line"><span>	# å°†æ­¤å¤„é‡å†™çš„URIä½œä¸ºä¸€ä¸ªæ–°çš„URIåœ¨å½“å‰locationä¸­ç»§ç»­æ‰§è¡Œï¼Œå¹¶ä¸ä¼šå°†æ–°çš„URIè½¬å‘å…¶ä»–location</span></span>
<span class="line"><span>	rewrite ^(.*)$ /index/$1 break;</span></span>
<span class="line"><span>	</span></span>
<span class="line"><span>	proxy_pass https://test.cos.ap-hongkong.myqcloud.com;</span></span>
<span class="line"><span>    #proxy_set_header Host $host;</span></span>
<span class="line"><span>	proxy_set_header Host test.cos.ap-hongkong.myqcloud.com;</span></span>
<span class="line"><span>    proxy_set_header X-Real-IP $remote_addr;</span></span>
<span class="line"><span>    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>
<span class="line"><span>    proxy_set_header REMOTE-HOST $remote_addr;</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    add_header X-Cache $upstream_cache_status;</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    #Set Nginx Cache</span></span>
<span class="line"><span>    add_header Cache-Control no-cache;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>location / {</span></span>
<span class="line"><span>    proxy_pass http://127.0.0.1:8081;</span></span>
<span class="line"><span>    proxy_set_header Host $host;</span></span>
<span class="line"><span>    proxy_set_header X-Real-IP $remote_addr;</span></span>
<span class="line"><span>    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>
<span class="line"><span>    proxy_set_header REMOTE-HOST $remote_addr;</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    add_header X-Cache $upstream_cache_status;</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    #Set Nginx Cache</span></span>
<span class="line"><span>    add_header Cache-Control no-cache;</span></span>
<span class="line"><span>    #expires 12h;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#PROXY-END/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/onni-top/nav-onni/edit/main/System/Nginx.md" aria-label="ç¼–è¾‘æ­¤é¡µ" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: admin@onni.top">onni-top</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/System/Linux%E9%85%8D%E7%BD%AE.html" aria-label="Linuxé…ç½®"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->Linuxé…ç½®</div></a><a class="route-link auto-link next" href="/System/Windows.html" aria-label="Windows"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">Windows<!----></div></a></nav><!----><!----><!--]--></main><!--]--><!----></div><!--]--><!--[--><!----><!--[--><!--]--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CPE2FVww.js" defer></script>
  </body>
</html>
