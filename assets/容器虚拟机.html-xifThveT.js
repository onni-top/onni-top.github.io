import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as l,c as o,b as r,e as t,w as a,a as h,o as p,d as n}from"./app-DxgGpIM1.js";const c={},k={class:"table-of-contents"};function d(g,e){const i=l("router-link");return p(),o("div",null,[e[6]||(e[6]=r("h1",{id:"容器虚拟机",tabindex:"-1"},[r("a",{class:"header-anchor",href:"#容器虚拟机"},[r("span",null,"容器虚拟机")])],-1)),r("nav",k,[r("ul",null,[r("li",null,[t(i,{to:"#flag"},{default:a(()=>e[0]||(e[0]=[n("Flag")])),_:1})]),r("li",null,[t(i,{to:"#其他容器技术"},{default:a(()=>e[1]||(e[1]=[n("其他容器技术")])),_:1})]),r("li",null,[t(i,{to:"#仓库镜像"},{default:a(()=>e[2]||(e[2]=[n("仓库镜像")])),_:1})]),r("li",null,[t(i,{to:"#docker命令"},{default:a(()=>e[3]||(e[3]=[n("Docker命令")])),_:1})]),r("li",null,[t(i,{to:"#docker-compose"},{default:a(()=>e[4]||(e[4]=[n("Docker compose")])),_:1})]),r("li",null,[t(i,{to:"#dockerfile"},{default:a(()=>e[5]||(e[5]=[n("Dockerfile")])),_:1})])])]),e[7]||(e[7]=h(`<h2 id="flag" tabindex="-1"><a class="header-anchor" href="#flag"><span>Flag</span></a></h2><ul><li><a href="https://github.com/topics/cloudnative" target="_blank" rel="noopener noreferrer">https://github.com/topics/cloudnative</a></li><li><a href="https://github.com/topics/openstack" target="_blank" rel="noopener noreferrer">https://github.com/topics/openstack</a></li><li><a href="https://github.com/docker" target="_blank" rel="noopener noreferrer">https://github.com/docker</a><ul><li><a href="https://www.docker.com" target="_blank" rel="noopener noreferrer">https://www.docker.com</a></li><li><a href="https://docs.docker.com" target="_blank" rel="noopener noreferrer">https://docs.docker.com</a></li><li>Windows10以下安装: <a href="https://github.com/docker/toolbox" target="_blank" rel="noopener noreferrer">https://github.com/docker/toolbox</a></li></ul></li><li><a href="https://github.com/boot2docker" target="_blank" rel="noopener noreferrer">https://github.com/boot2docker</a></li><li><a href="https://github.com/portainer/portainer" target="_blank" rel="noopener noreferrer">https://github.com/portainer/portainer</a><ul><li><a href="https://juejin.im/post/5da3de28518825651b1e0633" target="_blank" rel="noopener noreferrer">Docker及图形化管理UI Portainer的搭建</a></li></ul></li><li><a href="https://juejin.im/post/5da81a7d6fb9a04def4e6d6b" target="_blank" rel="noopener noreferrer">利用Docker实现后台项目模板化配置部署</a></li><li><a href="https://github.com/earthly/earthly" target="_blank" rel="noopener noreferrer">https://github.com/earthly/earthly</a></li><li><a href="https://github.com/StefanScherer/docker-cli-builder" target="_blank" rel="noopener noreferrer">https://github.com/StefanScherer/docker-cli-builder</a></li><li><a href="https://github.com/skanehira/docui" target="_blank" rel="noopener noreferrer">https://github.com/skanehira/docui</a></li><li><a href="https://github.com/jesseduffield/lazydocker" target="_blank" rel="noopener noreferrer">https://github.com/jesseduffield/lazydocker</a></li><li>GUI <a href="https://github.com/DockStation/dockstation" target="_blank" rel="noopener noreferrer">https://github.com/DockStation/dockstation</a></li></ul><ul><li><a href="https://github.com/dockur/windows" target="_blank" rel="noopener noreferrer">https://github.com/dockur/windows</a></li><li><a href="https://sleele.com/2018/09/27/docker%e8%bf%9b%e9%98%b6%e5%ae%9e%e7%94%a8%e5%91%bd%e4%bb%a4/" target="_blank" rel="noopener noreferrer">Docker进阶实用命令</a></li><li><a href="https://sleele.com/category/docker/" target="_blank" rel="noopener noreferrer">https://sleele.com/category/docker/</a></li><li><a href="https://docs.microsoft.com/zh-cn/virtualization" target="_blank" rel="noopener noreferrer">https://docs.microsoft.com/zh-cn/virtualization</a></li><li><a href="https://developer.ibm.com/zh/technologies/containers" target="_blank" rel="noopener noreferrer">https://developer.ibm.com/zh/technologies/containers</a></li><li><a href="https://www.cnblogs.com/itoak/category/1769634.html" target="_blank" rel="noopener noreferrer">随笔分类 - Docker</a></li><li>容器自动化构建 <a href="https://kany.me/tags/docker" target="_blank" rel="noopener noreferrer">https://kany.me/tags/docker</a></li><li><a href="http://skychang.github.io/2019/03/30/Docker-Install_Docker_Without_HyperV_In_Windows_10" target="_blank" rel="noopener noreferrer">在 Windows 10 底下不使用 Hyper-V 安裝 Docker</a></li><li><a href="https://docs.microsoft.com/zh-cn/virtualization/windowscontainers/quick-start/set-up-environment" target="_blank" rel="noopener noreferrer">https://docs.microsoft.com/zh-cn/virtualization/windowscontainers/quick-start/set-up-environment</a></li><li><a href="https://github.com/badtuxx/DescomplicandoDocker" target="_blank" rel="noopener noreferrer">https://github.com/badtuxx/DescomplicandoDocker</a></li><li><a href="https://github.com/yeasy/docker_practice" target="_blank" rel="noopener noreferrer">https://github.com/yeasy/docker_practice</a></li><li>日志查看 <a href="https://github.com/amir20/dozzle" target="_blank" rel="noopener noreferrer">https://github.com/amir20/dozzle</a></li></ul><ul><li>自己动手写docker <a href="https://github.com/xianlubird/mydocker" target="_blank" rel="noopener noreferrer">https://github.com/xianlubird/mydocker</a></li><li><a href="https://github.com/weaveworks/weave" target="_blank" rel="noopener noreferrer">https://github.com/weaveworks/weave</a></li><li><a href="https://github.com/jessfraz/dockerfiles" target="_blank" rel="noopener noreferrer">https://github.com/jessfraz/dockerfiles</a></li></ul><p><strong>Docker搭建私有仓库</strong></p><ul><li>企业级Registry服务器 <a href="https://github.com/goharbor/harbor" target="_blank" rel="noopener noreferrer">https://github.com/goharbor/harbor</a></li><li><a href="https://www.cnblogs.com/huanchupkblog/p/10843800.html" target="_blank" rel="noopener noreferrer">Docker 私有仓库搭建</a></li><li><a href="https://www.jianshu.com/p/2d9d4cdd3af7" target="_blank" rel="noopener noreferrer">从零搭建docker私有仓库</a></li></ul><h2 id="其他容器技术" tabindex="-1"><a class="header-anchor" href="#其他容器技术"><span>其他容器技术</span></a></h2><ul><li><a href="https://hub.grapps.cn" target="_blank" rel="noopener noreferrer">https://hub.grapps.cn</a></li><li><a href="https://github.com/topics/containers" target="_blank" rel="noopener noreferrer">https://github.com/topics/containers</a></li><li>OCI开放容器标准 <a href="https://github.com/opencontainers" target="_blank" rel="noopener noreferrer">https://github.com/opencontainers</a><ul><li><a href="https://opencontainers.org" target="_blank" rel="noopener noreferrer">https://opencontainers.org</a></li></ul></li><li>云原生技术图谱 <a href="https://github.com/cncf/landscape" target="_blank" rel="noopener noreferrer">https://github.com/cncf/landscape</a></li><li><a href="https://blog.csdn.net/weixin_40864891/article/details/86655846" target="_blank" rel="noopener noreferrer">OCI,CRI,CRI-O,Containerd 名词解释</a></li></ul><ul><li>策略 <a href="https://github.com/open-policy-agent" target="_blank" rel="noopener noreferrer">https://github.com/open-policy-agent</a></li><li>Go编写的迷你Docker <a href="https://github.com/shuveb/containers-the-hard-way" target="_blank" rel="noopener noreferrer">https://github.com/shuveb/containers-the-hard-way</a></li><li><a href="https://github.com/falcosecurity" target="_blank" rel="noopener noreferrer">https://github.com/falcosecurity</a></li><li><a href="https://github.com/draios" target="_blank" rel="noopener noreferrer">https://github.com/draios</a></li><li><a href="https://github.com/istio/istio" target="_blank" rel="noopener noreferrer">https://github.com/istio/istio</a></li><li><a href="http://dockone.io/article/5679" target="_blank" rel="noopener noreferrer">从开发者的角度比较Kubernetes和Cloud Foundry</a></li><li>k8s <a href="https://github.com/kubernetes" target="_blank" rel="noopener noreferrer">https://github.com/kubernetes</a><ul><li><a href="https://github.com/kubernetes-incubator" target="_blank" rel="noopener noreferrer">https://github.com/kubernetes-incubator</a></li><li><a href="https://github.com/kubernetes-sigs" target="_blank" rel="noopener noreferrer">https://github.com/kubernetes-sigs</a></li><li><a href="https://kubernetes.io" target="_blank" rel="noopener noreferrer">https://kubernetes.io</a></li><li>存储 <a href="https://github.com/openebs/openebs" target="_blank" rel="noopener noreferrer">https://github.com/openebs/openebs</a></li><li>软件包管理器 <a href="https://github.com/helm" target="_blank" rel="noopener noreferrer">https://github.com/helm</a></li><li>脚本安装K8S集群 <a href="https://github.com/easzlab/kubeasz" target="_blank" rel="noopener noreferrer">https://github.com/easzlab/kubeasz</a></li><li><a href="https://github.com/armosec/kubescape" target="_blank" rel="noopener noreferrer">https://github.com/armosec/kubescape</a></li><li><a href="https://github.com/fanux/sealos" target="_blank" rel="noopener noreferrer">https://github.com/fanux/sealos</a></li><li><a href="https://github.com/clusternet/clusternet" target="_blank" rel="noopener noreferrer">https://github.com/clusternet/clusternet</a></li><li><a href="https://github.com/genuinetools" target="_blank" rel="noopener noreferrer">https://github.com/genuinetools</a></li><li><a href="https://github.com/kubernetes-sigs" target="_blank" rel="noopener noreferrer">https://github.com/kubernetes-sigs</a></li><li><a href="https://github.com/tektoncd/pipeline" target="_blank" rel="noopener noreferrer">https://github.com/tektoncd/pipeline</a></li><li><a href="https://github.com/rancher/fleet" target="_blank" rel="noopener noreferrer">https://github.com/rancher/fleet</a></li><li><a href="https://github.com/splunk/qbec" target="_blank" rel="noopener noreferrer">https://github.com/splunk/qbec</a></li><li><a href="https://github.com/kube-rs" target="_blank" rel="noopener noreferrer">https://github.com/kube-rs</a></li><li><a href="https://github.com/pipekit" target="_blank" rel="noopener noreferrer">https://github.com/pipekit</a></li><li><a href="https://github.com/teamcode-inc/kubeorbit" target="_blank" rel="noopener noreferrer">https://github.com/teamcode-inc/kubeorbit</a></li><li><a href="https://github.com/chronolaw/k8s_study" target="_blank" rel="noopener noreferrer">https://github.com/chronolaw/k8s_study</a></li><li><a href="https://github.com/vmware-tanzu" target="_blank" rel="noopener noreferrer">https://github.com/vmware-tanzu</a></li><li><a href="https://github.com/lightrun-platform" target="_blank" rel="noopener noreferrer">https://github.com/lightrun-platform</a></li><li><a href="https://github.com/Rapha-Borges/oke-free" target="_blank" rel="noopener noreferrer">https://github.com/Rapha-Borges/oke-free</a></li><li><a href="https://github.com/k8zdev/k8z" target="_blank" rel="noopener noreferrer">https://github.com/k8zdev/k8z</a></li><li><a href="https://github.com/NVIDIA/gpu-operator" target="_blank" rel="noopener noreferrer">https://github.com/NVIDIA/gpu-operator</a></li><li>监控 <a href="https://github.com/keptn" target="_blank" rel="noopener noreferrer">https://github.com/keptn</a></li></ul></li><li><a href="https://github.com/openshift" target="_blank" rel="noopener noreferrer">https://github.com/openshift</a></li><li><a href="https://github.com/rook/rook" target="_blank" rel="noopener noreferrer">https://github.com/rook/rook</a></li><li><a href="https://github.com/lensapp/lens" target="_blank" rel="noopener noreferrer">https://github.com/lensapp/lens</a></li><li><a href="https://github.com/jenkins-x" target="_blank" rel="noopener noreferrer">https://github.com/jenkins-x</a></li><li><a href="https://github.com/kinvolk" target="_blank" rel="noopener noreferrer">https://github.com/kinvolk</a></li><li><a href="https://github.com/dapr" target="_blank" rel="noopener noreferrer">https://github.com/dapr</a></li><li><a href="https://github.com/dokku" target="_blank" rel="noopener noreferrer">https://github.com/dokku</a></li><li><a href="https://github.com/cloudfoundry" target="_blank" rel="noopener noreferrer">https://github.com/cloudfoundry</a><ul><li><a href="https://github.com/cloudfoundry-incubator" target="_blank" rel="noopener noreferrer">https://github.com/cloudfoundry-incubator</a></li><li><a href="https://www.cloudfoundry.org" target="_blank" rel="noopener noreferrer">https://www.cloudfoundry.org</a></li></ul></li><li><a href="https://github.com/distribution/distribution" target="_blank" rel="noopener noreferrer">https://github.com/distribution/distribution</a></li><li><a href="https://segmentfault.com/t/cloud-foundry" target="_blank" rel="noopener noreferrer">cloud-foundry 的动态 - SegmentFault 思否</a></li><li><a href="https://www.terraform.io" target="_blank" rel="noopener noreferrer">https://www.terraform.io</a></li><li><a href="https://github.com/rancher/rancher" target="_blank" rel="noopener noreferrer">https://github.com/rancher/rancher</a></li><li><a href="https://github.com/mesosphere/marathon" target="_blank" rel="noopener noreferrer">https://github.com/mesosphere/marathon</a></li><li>Ansible</li><li>Packer</li><li>谷歌、IBM、微软、Pivotal、SAP、SUSE、Swisscom、GE</li><li><a href="https://github.com/wekan/wekan" target="_blank" rel="noopener noreferrer">https://github.com/wekan/wekan</a></li><li><a href="https://github.com/google/gvisor" target="_blank" rel="noopener noreferrer">https://github.com/google/gvisor</a></li><li><a href="https://github.com/fnproject" target="_blank" rel="noopener noreferrer">https://github.com/fnproject</a></li><li><a href="https://github.com/verrazzano" target="_blank" rel="noopener noreferrer">https://github.com/verrazzano</a></li></ul><ul><li><a href="https://www.cnblogs.com/godcrying1202/archive/2004/01/13/14122532.html" target="_blank" rel="noopener noreferrer">systemd-nspawn以及container的学习</a></li><li><a href="https://github.com/eclipseo" target="_blank" rel="noopener noreferrer">https://github.com/eclipseo</a></li><li><a href="https://github.com/coreos" target="_blank" rel="noopener noreferrer">https://github.com/coreos</a></li><li>Linux Container <a href="https://github.com/lxc/lxc" target="_blank" rel="noopener noreferrer">https://github.com/lxc/lxc</a><ul><li><a href="https://linuxcontainers.org" target="_blank" rel="noopener noreferrer">https://linuxcontainers.org</a></li><li><a href="https://github.com/tailhook/unshare" target="_blank" rel="noopener noreferrer">https://github.com/tailhook/unshare</a></li></ul></li><li>podman <a href="https://github.com/containers" target="_blank" rel="noopener noreferrer">https://github.com/containers</a><ul><li><a href="https://github.com/lxc" target="_blank" rel="noopener noreferrer">https://github.com/lxc</a></li><li><a href="https://github.com/AdaptiveScale/lxdui" target="_blank" rel="noopener noreferrer">https://github.com/AdaptiveScale/lxdui</a></li><li><a href="https://mp.weixin.qq.com/s/MDi4RB5V60EGl3ii9usD0Q" target="_blank" rel="noopener noreferrer">再见 Docker，是时候拥抱下一代容器工具了</a></li><li><a href="https://blog.51cto.com/13447608/2448072" target="_blank" rel="noopener noreferrer">podman初试-和docker对比</a></li></ul></li><li><a href="https://github.com/lxc/incus" target="_blank" rel="noopener noreferrer">https://github.com/lxc/incus</a></li><li><a href="https://github.com/containerd/containerd" target="_blank" rel="noopener noreferrer">https://github.com/containerd/containerd</a></li></ul><ul><li><a href="https://github.com/bitnami/containers" target="_blank" rel="noopener noreferrer">https://github.com/bitnami/containers</a></li></ul><ul><li><a href="https://github.com/orbstack" target="_blank" rel="noopener noreferrer">https://github.com/orbstack</a></li><li><a href="https://github.com/moby/moby" target="_blank" rel="noopener noreferrer">https://github.com/moby/moby</a></li><li><a href="https://github.com/coreos" target="_blank" rel="noopener noreferrer">https://github.com/coreos</a></li><li><a href="https://github.com/cri-o/cri-o" target="_blank" rel="noopener noreferrer">https://github.com/cri-o/cri-o</a></li><li><a href="https://github.com/kata-containers" target="_blank" rel="noopener noreferrer">https://github.com/kata-containers</a><ul><li><a href="https://github.com/hyperhq" target="_blank" rel="noopener noreferrer">https://github.com/hyperhq</a><ul><li><a href="https://www.hyperhq.com" target="_blank" rel="noopener noreferrer">https://www.hyperhq.com</a></li></ul></li><li><a href="https://github.com/clearcontainers" target="_blank" rel="noopener noreferrer">https://github.com/clearcontainers</a></li></ul></li><li><a href="https://github.com/chaosblade-io/chaosblade" target="_blank" rel="noopener noreferrer">https://github.com/chaosblade-io/chaosblade</a></li><li><a href="https://github.com/alibaba/pouch" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/pouch</a></li><li><a href="https://github.com/singularity/singularity" target="_blank" rel="noopener noreferrer">https://github.com/singularity/singularity</a></li><li>集群管理器 <a href="https://github.com/apache/mesos" target="_blank" rel="noopener noreferrer">https://github.com/apache/mesos</a><ul><li><a href="https://github.com/mesos" target="_blank" rel="noopener noreferrer">https://github.com/mesos</a></li></ul></li><li><a href="https://github.com/OpenVZ" target="_blank" rel="noopener noreferrer">https://github.com/OpenVZ</a></li><li><a href="https://github.com/thijsvanloef/palworld-server-docker" target="_blank" rel="noopener noreferrer">https://github.com/thijsvanloef/palworld-server-docker</a></li></ul><p><strong>运行时</strong></p><ul><li><a href="https://github.com/topics/oci" target="_blank" rel="noopener noreferrer">https://github.com/topics/oci</a></li></ul><ul><li><a href="https://github.com/utam0k/youki" target="_blank" rel="noopener noreferrer">https://github.com/utam0k/youki</a></li><li><a href="https://github.com/containers/crun" target="_blank" rel="noopener noreferrer">https://github.com/containers/crun</a></li><li><a href="https://github.com/oracle/railcar" target="_blank" rel="noopener noreferrer">https://github.com/oracle/railcar</a></li><li><a href="https://github.com/opencontainers/runc" target="_blank" rel="noopener noreferrer">https://github.com/opencontainers/runc</a></li><li><a href="https://github.com/abiosoft/colima" target="_blank" rel="noopener noreferrer">https://github.com/abiosoft/colima</a></li><li><a href="https://github.com/lima-vm/lima" target="_blank" rel="noopener noreferrer">https://github.com/lima-vm/lima</a></li></ul><h2 id="仓库镜像" tabindex="-1"><a class="header-anchor" href="#仓库镜像"><span>仓库镜像</span></a></h2><ul><li>查找最快的docker镜像: <a href="https://github.com/silenceshell/docker_mirror" target="_blank" rel="noopener noreferrer">https://github.com/silenceshell/docker_mirror</a></li></ul><ul><li>Docker官方映像 <a href="https://github.com/docker-library" target="_blank" rel="noopener noreferrer">https://github.com/docker-library</a></li><li><a href="https://hub.docker.com" target="_blank" rel="noopener noreferrer">https://hub.docker.com</a></li><li><a href="https://hub.daocloud.io" target="_blank" rel="noopener noreferrer">https://hub.daocloud.io</a></li></ul><ul><li><a href="https://www.daocloud.io/mirror" target="_blank" rel="noopener noreferrer">https://www.daocloud.io/mirror</a></li></ul><blockquote><p>以下镜像地址需要直接配置在docker中，不能通过浏览器访问</p></blockquote><ul><li>阿里云 <a href="https://cr.console.aliyun.com" target="_blank" rel="noopener noreferrer">https://cr.console.aliyun.com</a><ul><li><a href="https://alzgoonw.mirror.aliyuncs.com" target="_blank" rel="noopener noreferrer">https://alzgoonw.mirror.aliyuncs.com</a></li><li><a href="https://jvqgqnis.mirror.aliyuncs.com" target="_blank" rel="noopener noreferrer">https://jvqgqnis.mirror.aliyuncs.com</a></li><li><a href="https://3laho3y3.mirror.aliyuncs.com" target="_blank" rel="noopener noreferrer">https://3laho3y3.mirror.aliyuncs.com</a></li><li><a href="https://cty6v5sm.mirror.aliyuncs.com" target="_blank" rel="noopener noreferrer">https://cty6v5sm.mirror.aliyuncs.com</a></li></ul></li><li>ustc中国科技大学 <a href="https://docker.mirrors.ustc.edu.cn" target="_blank" rel="noopener noreferrer">https://docker.mirrors.ustc.edu.cn</a></li><li>网易 <a href="http://hub-mirror.c.163.com" target="_blank" rel="noopener noreferrer">http://hub-mirror.c.163.com</a></li><li>Docker 官方中国区 <a href="https://registry.docker-cn.com" target="_blank" rel="noopener noreferrer">https://registry.docker-cn.com</a></li><li>Azure 中国镜像 <a href="https://dockerhub.azk8s.cn" target="_blank" rel="noopener noreferrer">https://dockerhub.azk8s.cn</a></li><li>七牛云加速器 <a href="https://reg-mirror.qiniu.com" target="_blank" rel="noopener noreferrer">https://reg-mirror.qiniu.com</a></li><li>腾讯云 <a href="https://mirror.ccs.tencentyun.com" target="_blank" rel="noopener noreferrer">https://mirror.ccs.tencentyun.com</a></li></ul><h2 id="docker命令" tabindex="-1"><a class="header-anchor" href="#docker命令"><span>Docker命令</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 退出docker容器</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 如果容器内部没有任何程序运行, 一旦执行exit, 退出容器时, 容器将结束运行</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">exit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 查看运行中的容器</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ps</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 查看全部的容器, 包括运行中和已停止运行的容器</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -a</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 通过容器名称删除已经停止运行的容器(test-centos为docker run命令中给容器的命名)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> test-centos</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 通过容器ID删除已经停止运行的容器,与上面的命令效果一样, 060e是containerID的前4位</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 060e</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 强制删除状态为Up, 正在运行中的容器</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> test-centos</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="docker-compose" tabindex="-1"><a class="header-anchor" href="#docker-compose"><span>Docker compose</span></a></h2><ul><li><a href="https://docs.docker.com/compose" target="_blank" rel="noopener noreferrer">Docker Compose概述</a></li><li><a href="https://docs.docker.com/compose/compose-file" target="_blank" rel="noopener noreferrer">Compose文件参考</a></li><li><a href="https://blog.csdn.net/qq_36148847/article/details/79427878" target="_blank" rel="noopener noreferrer">docker-compose.yml 配置文件编写详解</a></li><li><a href="https://www.jianshu.com/p/658911a8cff3" target="_blank" rel="noopener noreferrer">Docker Compose 详解</a></li><li><a href="https://www.jianshu.com/p/2217cfed29d7" target="_blank" rel="noopener noreferrer">Docker Compose 配置文件详解</a></li><li><a href="https://www.jianshu.com/p/e11e01b9d675" target="_blank" rel="noopener noreferrer">docker run 和 docker-compose 配置挂载 Volume 并运行 nginx</a></li><li><a href="https://github.com/Haxxnet/Compose-Examples" target="_blank" rel="noopener noreferrer">https://github.com/Haxxnet/Compose-Examples</a></li></ul><blockquote><p>Compose 文件是一个 YAML , 主要定义了 <code>services</code>,<code>networks</code> 和 <code>volumes</code>，其默认路径是 <code>./docker-compose.yml</code></p></blockquote><blockquote><p><code>service</code> 定义包含了应用与每个容器的配置，很像给 <code>docker run</code> 传参，同样， <code>network</code> 和 <code>volume</code> 对于 <code>docker network create</code> 和 <code>docker volume create</code> 也类似。</p></blockquote><blockquote><p>像在 Dockerfile （eg: <code>CMD</code> , <code>EXPOSE</code> , <code>VOLUME</code> , <code>ENV</code>）可以使用的选项也可以在 <code>docker run</code>参数中使用， 这样在 <code>docker-compose.yml</code> 里就不需要再次指定了。</p></blockquote><blockquote><p><code>docker-compose.yml</code> 里可以使用环境变量，类似 <code>Bash</code> 格式 <code>\${VARIABLE}</code></p></blockquote><ul><li><code>composer</code> 文件格式有两种版本： <ul><li><code>version 1</code>: 已经废弃， 不支持<code>volumes</code> 和 <code>networks</code>，默认 <code>version key</code> 是省略的。</li><li><code>version 2</code>: 推荐的格式，目前是最新的，需要通过 <code>version &#39;2&#39;</code> 指定。</li></ul></li></ul><p><strong>ports</strong></p><blockquote><p>暴露端口。既可以是 <code>HOST:CONTAINER</code> ，也可以只用容器端口(host端口会随机选取)。 当以 <code>HOST:CONTAINER</code> 的形式映射端口的时候，当容器的端口低于60的时候可能会遇到错误， 因为YAML会解析 xx:yy 数字为60。 基于这个原因，我们推荐明确指定端口映射用字符串的形式。</p></blockquote><p><strong>volumes</strong></p><blockquote><p>挂载指定的路径或者<code>named volumes</code>, 可以在主机上指定一个路径 HOST:CONTAINER ,或者一个可访问的 HOST:CONTAINER:ro 。</p></blockquote><h2 id="dockerfile" tabindex="-1"><a class="header-anchor" href="#dockerfile"><span>Dockerfile</span></a></h2><ul><li><a href="https://docs.docker.com/engine/reference/builder" target="_blank" rel="noopener noreferrer">Dockerfile参考</a></li><li><a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices" target="_blank" rel="noopener noreferrer">编写Dockerfile的最佳实践</a></li><li><a href="https://mp.weixin.qq.com/s/2poLYm-MgAEJxCYiRZDnQw" target="_blank" rel="noopener noreferrer">Dockerfile 基本命令详解</a></li></ul><ul><li>创建<code>Dockerfile</code>文件</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Dockerfile</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>添加内容</li></ul><div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" data-title="dockerfile" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 使用的基础镜像</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> centos:7</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 作者信息</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">MAINTAINER</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> bajins </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;claer@bajins.com&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 创建目录</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> mkdir -p /data/java/jdk1.7.0_80</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 把当前目录下的jdk文件夹添加到镜像</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ADD</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> jdk1.7.0_80 /data/java/jdk1.7.0_80</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 创建tomcat目录</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> mkdir -p /data/java/tomcat-8080</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 把当前目录下的tomcat文件夹添加到镜像</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ADD</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tomcat-8080 /data/java/tomcat-8080</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 添加环境变量</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ENV</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> JAVA_HOME /data/java/jdk1.7.0_80</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ENV</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> CATALINA_HOME /data/java/tomcat-8080</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ENV</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/bin</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 暴露容器端口</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">EXPOSE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 8080</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">EXPOSE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 8090</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 启动时运行tomcat</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">CMD</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/data/java/tomcat-8080/bin/catalina.sh&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;run&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-dockerfile line-numbers-mode" data-highlighter="shiki" data-ext="dockerfile" data-title="dockerfile" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> centos:7</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#安装wget工具</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> yum -y install wget</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#下载并且安装jdk设置环境变量</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">COPY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> jdk-8u201-linux-x64.rpm jdk-8u201-linux-x64.rpm</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> rpm -ivh jdk-8u201-linux-x64.rpm</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ENV</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> JAVA_HOME /usr/java/latest/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ENV</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> PATH=$JAVA_HOME/bin:$PATH</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ENV</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> rm -rf jdk-8u201-linux-x64.rpm</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#时区中文等处理</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    echo </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Asia/Shanghai&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt;/etc/timezone</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> yum -y install kde-l10n-Chinese</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#配置显示中文</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> localedef -c -f UTF-8 -i zh_CN zh_CN.utf8</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ENV</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> LC_ALL zh_CN.utf8</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RUN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> echo </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;export LC_ALL=zh_CN.utf8&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt;&gt; /etc/profile</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,41))])}const m=s(c,[["render",d],["__file","容器虚拟机.html.vue"]]),f=JSON.parse('{"path":"/PL/%E5%AE%B9%E5%99%A8%E8%99%9A%E6%8B%9F%E6%9C%BA.html","title":"容器虚拟机","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"Flag","slug":"flag","link":"#flag","children":[]},{"level":2,"title":"其他容器技术","slug":"其他容器技术","link":"#其他容器技术","children":[]},{"level":2,"title":"仓库镜像","slug":"仓库镜像","link":"#仓库镜像","children":[]},{"level":2,"title":"Docker命令","slug":"docker命令","link":"#docker命令","children":[]},{"level":2,"title":"Docker compose","slug":"docker-compose","link":"#docker-compose","children":[]},{"level":2,"title":"Dockerfile","slug":"dockerfile","link":"#dockerfile","children":[]}],"git":{"createdTime":1726030162000,"updatedTime":1726030162000,"contributors":[{"name":"onni-top","email":"admin@onni.top","commits":1}]},"readingTime":{"minutes":5.82,"words":1747},"filePathRelative":"PL/容器虚拟机.md","localizedDate":"2024年9月11日","excerpt":"\\n\\n<h2>Flag</h2>\\n<ul>\\n<li><a href=\\"https://github.com/topics/cloudnative\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/topics/cloudnative</a></li>\\n<li><a href=\\"https://github.com/topics/openstack\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/topics/openstack</a></li>\\n<li><a href=\\"https://github.com/docker\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/docker</a>\\n<ul>\\n<li><a href=\\"https://www.docker.com\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://www.docker.com</a></li>\\n<li><a href=\\"https://docs.docker.com\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://docs.docker.com</a></li>\\n<li>Windows10以下安装: <a href=\\"https://github.com/docker/toolbox\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/docker/toolbox</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://github.com/boot2docker\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/boot2docker</a></li>\\n<li><a href=\\"https://github.com/portainer/portainer\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/portainer/portainer</a>\\n<ul>\\n<li><a href=\\"https://juejin.im/post/5da3de28518825651b1e0633\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Docker及图形化管理UI Portainer的搭建</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://juejin.im/post/5da81a7d6fb9a04def4e6d6b\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">利用Docker实现后台项目模板化配置部署</a></li>\\n<li><a href=\\"https://github.com/earthly/earthly\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/earthly/earthly</a></li>\\n<li><a href=\\"https://github.com/StefanScherer/docker-cli-builder\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/StefanScherer/docker-cli-builder</a></li>\\n<li><a href=\\"https://github.com/skanehira/docui\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/skanehira/docui</a></li>\\n<li><a href=\\"https://github.com/jesseduffield/lazydocker\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/jesseduffield/lazydocker</a></li>\\n<li>GUI <a href=\\"https://github.com/DockStation/dockstation\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/DockStation/dockstation</a></li>\\n</ul>"}');export{m as comp,f as data};
