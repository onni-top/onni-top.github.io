import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as h,c as r,b as s,d as n,w as l,a as p,o as k,e}from"./app--VhlLr_b.js";const d={},o={class:"table-of-contents"};function c(g,i){const a=h("router-link");return k(),r("div",null,[i[8]||(i[8]=s("h1",{id:"linux网络防火墙",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#linux网络防火墙"},[s("span",null,"Linux网络防火墙")])],-1)),s("nav",o,[s("ul",null,[s("li",null,[n(a,{to:"#flag"},{default:l(()=>i[0]||(i[0]=[e("Flag")])),_:1})]),s("li",null,[n(a,{to:"#查看网络"},{default:l(()=>i[1]||(i[1]=[e("查看网络")])),_:1})]),s("li",null,[n(a,{to:"#iptables"},{default:l(()=>i[2]||(i[2]=[e("iptables")])),_:1})]),s("li",null,[n(a,{to:"#ufw"},{default:l(()=>i[3]||(i[3]=[e("UFW")])),_:1})]),s("li",null,[n(a,{to:"#firewalld"},{default:l(()=>i[4]||(i[4]=[e("firewalld")])),_:1})]),s("li",null,[n(a,{to:"#路由跟踪"},{default:l(()=>i[5]||(i[5]=[e("路由跟踪")])),_:1})]),s("li",null,[n(a,{to:"#网卡"},{default:l(()=>i[6]||(i[6]=[e("网卡")])),_:1}),s("ul",null,[s("li",null,[n(a,{to:"#mtu"},{default:l(()=>i[7]||(i[7]=[e("MTU")])),_:1})])])])])]),i[9]||(i[9]=p(`<h2 id="flag" tabindex="-1"><a class="header-anchor" href="#flag"><span>Flag</span></a></h2><ul><li>网络测试 <a href="https://github.com/Microsoft/ntttcp-for-linux" target="_blank" rel="noopener noreferrer">https://github.com/Microsoft/ntttcp-for-linux</a></li><li><a href="https://github.com/mellanox/sockperf" target="_blank" rel="noopener noreferrer">https://github.com/mellanox/sockperf</a></li><li><a href="https://iperf.fr" target="_blank" rel="noopener noreferrer">https://iperf.fr</a><ul><li><a href="https://sourceforge.net/projects/iperf" target="_blank" rel="noopener noreferrer">https://sourceforge.net/projects/iperf</a></li><li><a href="https://sourceforge.net/projects/iperf2" target="_blank" rel="noopener noreferrer">https://sourceforge.net/projects/iperf2</a></li><li><a href="https://github.com/esnet/iperf" target="_blank" rel="noopener noreferrer">https://github.com/esnet/iperf</a></li></ul></li><li><a href="https://www.zhihu.com/question/489849459" target="_blank" rel="noopener noreferrer">局域网怎么实现内外网隔离？</a></li></ul><h2 id="查看网络" tabindex="-1"><a class="header-anchor" href="#查看网络"><span>查看网络</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 查询系统中缓存的ARP表，ARP表用来维护IP地址与MAC地址的对应关系</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">arp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -an</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> a</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ifconfig</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 提取主机上的IP信息</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> add</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;global&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">awk</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&#39;{print $2}&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">awk</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -F/</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;{print $1}&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 输出当前的ESTABLISHED和TIME_WAIT数</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">awk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}&#39;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ant</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">awk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    {++s[$NF]} END {for(k in s) print k,s[k]}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ss</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ant</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">awk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    {++s[$1]} END {for(k in s) print k,s[k]}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 详情</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -antp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 打印所有进程及其线程</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pstree</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 打印某个进程的线程数</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pstree</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {pid}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wc</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -l</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 打印当前地址IP链接情况</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -antp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;ESTABLISHED&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">awk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;{print $5}&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">awk</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -F</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;{print $4}&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sort</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">uniq</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -c</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="iptables" tabindex="-1"><a class="header-anchor" href="#iptables"><span>iptables</span></a></h2><ul><li>iptables <a href="https://www.netfilter.org" target="_blank" rel="noopener noreferrer">https://www.netfilter.org</a></li></ul><blockquote><p>iptables是Linux从2.4.x版本内核开始，系统自带的防火墙。随着Linux内核的不断更新，Linux的防火墙在iptables基础上泛生出 UFW和Firewalld，并且在一些发行版中已经替代iptables。</p></blockquote><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#永久关闭防火墙</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">chkconfig</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> off</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 永久关闭后启用</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">chkconfig</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> on</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 查看防火墙规则</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -L</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 查出所有的规则信息</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -nvl</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -L</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --line-number</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 清空已存在的规则</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -F</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --flush</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># sudo iptables -I INPUT -p tcp --dport [端口号] -j ACCEPT</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># --dport 目标端口，数据从外部进入服务器</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># --sport 数据源端口，数据从服务器出去</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -I</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --dport</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3306</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ACCEPT</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 保存iptables设置规则</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">iptables-save</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 安装iptables-persistent工具，使端口配置持久化</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> iptables-persistent</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 端口配置永久生效 </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> netfilter-persistent</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> save</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> netfilter-persistent</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> reload</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 生成的规则将被存储在以下文件中:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># /etc/iptables/rules.v4</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># /etc/iptables/rules.v6</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ufw" tabindex="-1"><a class="header-anchor" href="#ufw"><span>UFW</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 安装</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ufw</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 检查 UFW 的状态</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ufw</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> verbose</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 打开防火墙</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ufw</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> enable</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 关闭防火墙</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ufw</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> disable</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#重启防火墙</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ufw</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> reload</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 查看已经定义的ufw规则</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ufw</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> status</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 外来访问默认允许</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ufw</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> allow</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 外来访问默认拒绝</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ufw</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> deny</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 允许访问20端口，20后可跟/tcp或/udp，表示tcp或udp封包。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ufw</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> allow</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 20</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 拒绝访问20端口，20后可跟/tcp或/udp，表示tcp或udp封包。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ufw</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> deny</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 20</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 允许自192.168.0.0/24的tcp封包访问本机的22端口。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ufw</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> allow</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> proto</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tcp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 192.168.0.0/24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> any</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> port</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 22</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 删除以前定义的&quot;允许访问20端口&quot;的规则</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ufw</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> delete</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> allow</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 20</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 删除以前定义的&quot;拒绝访问20端口&quot;的规则</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ufw</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> delete</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> deny</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 20</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="firewalld" tabindex="-1"><a class="header-anchor" href="#firewalld"><span>firewalld</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 查看firewalld状态，发现当前是dead状态，即防火墙未开启。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> firewalld</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 开启防火墙，没有任何提示即开启成功。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> start</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> firewalld</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 查看已开放的端口(默认不开放任何端口)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">firewall-cmd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --list-ports</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 重启防火墙</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">firewall-cmd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --reload</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 停止防火墙</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> stop</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> firewalld.service</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 禁止防火墙开机启动</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> disable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> firewalld.service</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 删除端口</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">firewall-cmd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --zone=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> public</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --remove-port=80/tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --permanent</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 开启80端口</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">firewall-cmd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --zone=public</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --add-port=80/tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --permanent</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 开启8080-8089的IP端</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">firewall-cmd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --zone=public</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --add-port=8080-8089/tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --permanent</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 开启3306端口</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">firewall-cmd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --zone=public</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --add-port=3306/tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --permanent</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>--zone</code> 作用域</li><li><code>--add-port=80/tcp</code> 添加端口，格式为：端口/通讯协议</li><li><code>--permanent</code> 永久生效，没有此参数重启后失效</li></ul><p><strong>配置<code>firewalld-cmd</code></strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 查看版本</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">firewall-cmd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --version</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 查看帮助</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">firewall-cmd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --help</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 显示状态</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">firewall-cmd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --state</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 查看所有打开的端口</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">firewall-cmd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --zone=public</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --list-ports</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 更新防火墙规则</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">firewall-cmd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --reload</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 查看区域信息</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">firewall-cmd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --get-active-zones</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 查看指定接口所属区域</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">firewall-cmd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --get-zone-of-interface=eth0</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 拒绝所有包</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">firewall-cmd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --panic-on</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 取消拒绝状态</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">firewall-cmd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --panic-off</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 查看是否拒绝</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">firewall-cmd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --query-panic</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="路由跟踪" tabindex="-1"><a class="header-anchor" href="#路由跟踪"><span>路由跟踪</span></a></h2><ul><li>查询IP地理信息 <a href="https://github.com/zu1k/nali" target="_blank" rel="noopener noreferrer">https://github.com/zu1k/nali</a></li><li><a href="https://github.com/ihmily/ip-info-api" target="_blank" rel="noopener noreferrer">https://github.com/ihmily/ip-info-api</a></li><li><a href="https://github.com/jason5ng32/MyIP" target="_blank" rel="noopener noreferrer">https://github.com/jason5ng32/MyIP</a></li><li><a href="https://ip.guide" target="_blank" rel="noopener noreferrer">https://ip.guide</a></li><li><a href="https://github.com/hackclub/how-did-i-get-here" target="_blank" rel="noopener noreferrer">https://github.com/hackclub/how-did-i-get-here</a><ul><li><a href="https://github.com/hackclub/ktr" target="_blank" rel="noopener noreferrer">https://github.com/hackclub/ktr</a></li></ul></li><li><a href="https://github.com/lionsoul2014/ip2region" target="_blank" rel="noopener noreferrer">https://github.com/lionsoul2014/ip2region</a><ul><li><a href="https://gitee.com/lionsoul/ip2region" target="_blank" rel="noopener noreferrer">https://gitee.com/lionsoul/ip2region</a></li></ul></li><li><a href="https://ifconfig.me" target="_blank" rel="noopener noreferrer">https://ifconfig.me</a><ul><li><a href="https://github.com/pmarques/ifconfig.me" target="_blank" rel="noopener noreferrer">https://github.com/pmarques/ifconfig.me</a></li></ul></li><li><a href="https://github.com/georgyo/ifconfig.io" target="_blank" rel="noopener noreferrer">https://github.com/georgyo/ifconfig.io</a></li><li><a href="https://github.com/missdeer/ifconfig" target="_blank" rel="noopener noreferrer">https://github.com/missdeer/ifconfig</a></li><li><a href="https://github.com/ipinfo" target="_blank" rel="noopener noreferrer">https://github.com/ipinfo</a></li><li><a href="https://github.com/pronto/ifconfig.pro" target="_blank" rel="noopener noreferrer">https://github.com/pronto/ifconfig.pro</a></li><li><a href="https://github.com/ngoduykhanh/ifconfig.top" target="_blank" rel="noopener noreferrer">https://github.com/ngoduykhanh/ifconfig.top</a></li><li><a href="https://github.com/ftao/python-ifcfg" target="_blank" rel="noopener noreferrer">https://github.com/ftao/python-ifcfg</a></li><li><a href="https://github.com/sanketsudake/ifconfig-parser" target="_blank" rel="noopener noreferrer">https://github.com/sanketsudake/ifconfig-parser</a></li><li><a href="https://www.browserscan.net" target="_blank" rel="noopener noreferrer">https://www.browserscan.net</a></li><li><a href="https://www.ipip.net" target="_blank" rel="noopener noreferrer">https://www.ipip.net</a><ul><li><a href="https://www.myip.la" target="_blank" rel="noopener noreferrer">https://www.myip.la</a></li></ul></li><li><a href="https://cloud.magiclen.org/cn/myip" target="_blank" rel="noopener noreferrer">https://cloud.magiclen.org/cn/myip</a></li><li><a href="https://dns.fish" target="_blank" rel="noopener noreferrer">https://dns.fish</a></li><li>可用性检查 <a href="https://github.com/funilrys/PyFunceble" target="_blank" rel="noopener noreferrer">https://github.com/funilrys/PyFunceble</a></li><li><a href="https://github.com/hatoo/oha" target="_blank" rel="noopener noreferrer">https://github.com/hatoo/oha</a></li></ul><p><strong><code>ping</code>、<code>tcptraceroute</code>、<code>traceroute</code>、<code>mtr</code></strong></p><ul><li><a href="https://github.com/fujiapple852/trippy" target="_blank" rel="noopener noreferrer">https://github.com/fujiapple852/trippy</a></li><li><a href="https://www.cnblogs.com/xzkzzz/p/7413177.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/xzkzzz/p/7413177.html</a></li><li><a href="https://www.jianshu.com/p/802010d54849" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/802010d54849</a></li><li><a href="https://cloud.tencent.com/developer/article/1332118" target="_blank" rel="noopener noreferrer">https://cloud.tencent.com/developer/article/1332118</a></li><li><a href="http://winmtr.net/download-winmtr" target="_blank" rel="noopener noreferrer">http://winmtr.net/download-winmtr</a></li><li><a href="https://www.cnblogs.com/dalianpai/p/12505678.html" target="_blank" rel="noopener noreferrer">Netcat详解</a></li><li><a href="http://www.dest-unreach.org/socat" target="_blank" rel="noopener noreferrer">http://www.dest-unreach.org/socat</a></li><li><a href="https://github.com/vi/websocat" target="_blank" rel="noopener noreferrer">https://github.com/vi/websocat</a></li><li><a href="https://github.com/pouriyajamshidi/tcping" target="_blank" rel="noopener noreferrer">https://github.com/pouriyajamshidi/tcping</a></li></ul><blockquote><p>在Linux中有一个更好的网络连通性判断工具，它可以结合ping | nslookup | tracert 来判断网络的相关特性，这个命令就是mtr。</p></blockquote><blockquote><p>注意：MTR使用的raw sockets是绕过TCP/IP协议，需要ROOT权限来执行，因此如果以普通用户身份来执行mtr会出错， 提示“mtr: unable to get raw sockets”</p></blockquote><ul><li><a href="http://www.vdberg.org/~richard/tcpping.html" target="_blank" rel="noopener noreferrer">tcpping- 禁止了ICMP协议（ping命令）也能用</a><ul><li><a href="https://github.com/deajan/tcpping" target="_blank" rel="noopener noreferrer">https://github.com/deajan/tcpping</a></li></ul></li></ul><blockquote><p><code>tcpping</code>脚本依赖<code>tcptraceroute</code> 组件，所以必须先安装<code>yum install tcptraceroute</code></p></blockquote><ul><li><a href="https://elifulkerson.com/projects/" target="_blank" rel="noopener noreferrer">https://elifulkerson.com/projects/</a></li></ul><blockquote><p>注意<code>tcpping</code>与<code>tcping</code> 是不同的两款工具</p></blockquote><ul><li><a href="https://docs.microsoft.com/zh-cn/sysinternals/downloads/psping" target="_blank" rel="noopener noreferrer">https://docs.microsoft.com/zh-cn/sysinternals/downloads/psping</a></li><li><a href="https://code.google.com/archive/p/paping/downloads" target="_blank" rel="noopener noreferrer">https://code.google.com/archive/p/paping/downloads</a></li></ul><blockquote><p><code>PsPing</code> 是微软 <code>PSTools</code> 工具套件中的其中一个命令。除了 <code>ICMP</code> ping 测试，主要用来测试 TCP 端口的连通性， 还可以测试 <code>TCP/UDP</code> 网络时延和带宽。不过， <code>PsPing</code> 只能在 Windows 中运行。Linux 可以使用 <code>PaPing</code> （跨平台的开源工具）。</p></blockquote><ul><li><a href="https://github.com/antirez/hping" target="_blank" rel="noopener noreferrer">https://github.com/antirez/hping</a></li></ul><p><strong>常用网站</strong></p><ul><li><a href="http://ipcheck.need.sh" target="_blank" rel="noopener noreferrer">http://ipcheck.need.sh</a></li><li><a href="https://torch.njs.app" target="_blank" rel="noopener noreferrer">https://torch.njs.app</a></li><li>瓦工的全球ping工具 <a href="http://ping.pe" target="_blank" rel="noopener noreferrer">http://ping.pe</a></li><li><a href="https://www.yougetsignal.com/tools/open-ports" target="_blank" rel="noopener noreferrer">https://www.yougetsignal.com/tools/open-ports</a></li><li><a href="http://tool.chinaz.com/port" target="_blank" rel="noopener noreferrer">http://tool.chinaz.com/port</a></li><li><a href="https://www.websitepulse.com/tools/china-firewall-test" target="_blank" rel="noopener noreferrer">https://www.websitepulse.com/tools/china-firewall-test</a></li><li><a href="https://www.vps234.com/ipchecker" target="_blank" rel="noopener noreferrer">https://www.vps234.com/ipchecker</a></li><li><a href="https://tools.ipip.net/traceroute.php" target="_blank" rel="noopener noreferrer">https://tools.ipip.net/traceroute.php</a></li><li>IP范围转换CIDR <a href="https://ip2cidr.com" target="_blank" rel="noopener noreferrer">https://ip2cidr.com</a></li><li><a href="http://apps.neu.edu.cn/netaggr" target="_blank" rel="noopener noreferrer">http://apps.neu.edu.cn/netaggr</a></li><li><a href="https://www.sioe.cn/xinqing/CIDR.php" target="_blank" rel="noopener noreferrer">无类别域间路由（CIDR）网络地址计算器</a></li><li><a href="https://zh.rakko.tools/tools/27" target="_blank" rel="noopener noreferrer">IPv4 / IPv6 CIDR计算器 | RAKKOTOOLS🔧</a></li><li><a href="http://ip.chacuo.net/ipconvert" target="_blank" rel="noopener noreferrer">http://ip.chacuo.net/ipconvert</a></li><li><a href="https://github.com/3th1nk/cidr" target="_blank" rel="noopener noreferrer">https://github.com/3th1nk/cidr</a></li><li><a href="https://www.oldking.net" target="_blank" rel="noopener noreferrer">https://www.oldking.net</a></li></ul><p><strong>tracert</strong></p><blockquote><p><code>Tracert</code> 列出分组经过的路由节点，以及它在IP 网络中每一跳的延迟（这里的延迟是指：分组从信息源发送到目的地所需的时间， 延迟也分为许多的种类——传播延迟、传输延迟、处理延迟、排队延迟等，是大多数网站性能的瓶颈之一）.</p></blockquote><div class="language-batch line-numbers-mode" data-highlighter="shiki" data-ext="batch" data-title="batch" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">tracert</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [-d] [-h maximum_hops] [-j host-list] [-w timeout] [-R] [-S srcaddr] [-4] [-6] target_name</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>选项</strong></p><ul><li><code>-d</code> 指定不将 IP 地址解析到主机名称。</li><li><code>-h maximum_hops</code> 指定跃点数以跟踪到称为 target_name 的主机的路由。</li><li><code>-j host-list</code> 指定 Tracert 实用程序数据包所采用路径中的路由器接口列表。</li><li><code>-w timeout</code> 等待 timeout 为每次回复所指定的毫秒数。</li><li><code>target_name</code> 目标主机的名称或 IP 地址。</li></ul><p><strong>示例</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tracert</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www.bajins.com</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="网卡" tabindex="-1"><a class="header-anchor" href="#网卡"><span>网卡</span></a></h2><h3 id="mtu" tabindex="-1"><a class="header-anchor" href="#mtu"><span>MTU</span></a></h3><blockquote><p>MTU经过网卡传输的数据包的最大传输单元,传输设备的MTU值不规范造成传输失败的情况</p></blockquote><p><strong>查看MTU值</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /sys/class/net/eth0/mtu</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>临时更改MTU值</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;1476&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/sys/class/net/eth0/mtu</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 或者</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># ifconfig 网口名 mtu 数值</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ifconfig</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> eth0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mtu</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1476</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>永久更改MTU值</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/sysconfig/network-scripts/ifcfg-eth0</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 在DEVICE=eth0下面加入</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">MTU</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">1476</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 启用IPv6地址的，修改IPv6 mtu的参数为</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">IPV6_MTU</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;1280&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>重启网络接口</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">service</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> restart</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,48))])}const A=t(d,[["render",c],["__file","Linux网络防火墙.html.vue"]]),y=JSON.parse('{"path":"/System/Linux%E7%BD%91%E7%BB%9C%E9%98%B2%E7%81%AB%E5%A2%99.html","title":"Linux网络防火墙","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"Flag","slug":"flag","link":"#flag","children":[]},{"level":2,"title":"查看网络","slug":"查看网络","link":"#查看网络","children":[]},{"level":2,"title":"iptables","slug":"iptables","link":"#iptables","children":[]},{"level":2,"title":"UFW","slug":"ufw","link":"#ufw","children":[]},{"level":2,"title":"firewalld","slug":"firewalld","link":"#firewalld","children":[]},{"level":2,"title":"路由跟踪","slug":"路由跟踪","link":"#路由跟踪","children":[]},{"level":2,"title":"网卡","slug":"网卡","link":"#网卡","children":[{"level":3,"title":"MTU","slug":"mtu","link":"#mtu","children":[]}]}],"git":{"createdTime":1726030162000,"updatedTime":1726030162000,"contributors":[{"name":"onni-top","email":"admin@onni.top","commits":1}]},"readingTime":{"minutes":5.9,"words":1769},"filePathRelative":"System/Linux网络防火墙.md","localizedDate":"2024年9月11日","excerpt":"\\n\\n<h2>Flag</h2>\\n<ul>\\n<li>网络测试 <a href=\\"https://github.com/Microsoft/ntttcp-for-linux\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/Microsoft/ntttcp-for-linux</a></li>\\n<li><a href=\\"https://github.com/mellanox/sockperf\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/mellanox/sockperf</a></li>\\n<li><a href=\\"https://iperf.fr\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://iperf.fr</a>\\n<ul>\\n<li><a href=\\"https://sourceforge.net/projects/iperf\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://sourceforge.net/projects/iperf</a></li>\\n<li><a href=\\"https://sourceforge.net/projects/iperf2\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://sourceforge.net/projects/iperf2</a></li>\\n<li><a href=\\"https://github.com/esnet/iperf\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/esnet/iperf</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://www.zhihu.com/question/489849459\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">局域网怎么实现内外网隔离？</a></li>\\n</ul>"}');export{A as comp,y as data};
